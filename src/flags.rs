use crate::library::Args;
use clap::Parser;
use once_cell::sync::Lazy;

// -Zvalidate-mir -Zverify-llvm-ir=yes -Zincremental-verify-ich=yes -Zmir-opt-level=0 -Zmir-opt-level=1 -Zmir-opt-level=2 -Zmir-opt-level=3 -Zdump-mir=all --emit=mir -Zprint-mono-items=eager
//&q["-Zcrate-attr=feature(generic_associated_types)"],
// git grep -o  "unstable(feature = \"[A-Za-z_-]*"   | grep -o "\ .*$" | grep -o "\".*" | sed s/\"// | sort -n | uniq | grep "...."

// cat compiler/rustc_feature/src/unstable.rs  | grep "(unstable,.*, \""  | sed s/,//g | awk '{print "\"-Zcrate-attr=feature("$2")\","}'

static DEFAULT_RUSTFLAGS: &[&[&str]] = &[
    // all allow-by-default lints, split into two because otherwise the get_flag_combinations would eat all ram

    /*
        for i in `rustc -Whelp | grep "  allow" | sed -e "s/\ \ \ //g"   | sed -e "s/\ \ /\ /g" | sed -e "s/\ \ /\ /g"  | sed -e "s/^\ //" | cut -d' ' -f1` ; do ; echo "\"-W${i}\","; done
    */
    &[
        // lints #1
        "-Zunstable-options",
        "-Zcrate-attr=feature(strict_provenance)",
        "-Zcrate-attr=feature(must_not_suspend)",
        "-Zcrate-attr=feature(non_exhaustive_omitted_patterns_lint)",
        "-Ztranslate-lang=en_US",
        "-Zmaximal-hir-to-mir-coverage",
        // "-Clto=off", // rustc_codegen_gcc
        "--edition=2021",
        //  "-Ztreat-err-as-bug=3",
        "--cap-lints=warn",
        "--verbose",
        "-Wabsolute-paths-not-starting-with-crate",
        "-Wbox-pointers",
        "-Wdeprecated-in-future",
        "-Welided-lifetimes-in-paths",
        "-Wexplicit-outlives-requirements",
        "-Wffi-unwind-calls",
        "-Wfuzzy-provenance-casts",
        "-Wkeyword-idents",
        "-Wlet-underscore-drop",
        "-Wlossy-provenance-casts",
        "-Wmacro-use-extern-crate",
        "-Wmeta-variable-misuse",
        "-Wmissing-abi",
        "-Wmissing-copy-implementations",
        "-Wmissing-debug-implementations",
        "-Wmissing-docs",
        "-Wmultiple-supertrait-upcastable",
        "-Wmust-not-suspend",
        "-Wnon-ascii-idents",
        "-Wnon-exhaustive-omitted-patterns",
        "-Wrust-2021-incompatible-closure-captures",
        "-Wrust-2021-incompatible-or-patterns",
        "-Wrust-2021-prefixes-incompatible-syntax",
        "-Wrust-2021-prelude-collisions",
        "-Wsingle-use-lifetimes",
        "-Wtrivial-casts",
        "-Wtrivial-numeric-casts",
        "-Wunit-bindings",
        "-Wunnameable-types",
        "-Wunreachable-pub",
        "-Wunsafe-code",
        "-Wunsafe-op-in-unsafe-fn",
        "-Wunstable-features",
        "-Wunused-crate-dependencies",
        "-Wunused-extern-crates",
        "-Wunused-import-braces",
        "-Wunused-lifetimes",
        "-Wunused-macro-rules",
        "-Wunused-qualifications",
        "-Wunused-results",
        "-Wunused-tuple-struct-fields",
        "-Wvariant-size-differences",
    ],
    // basic stuff, edition 2015
    &[
        "-Zmir-opt-level=5",
        "-Zmir-opt-level=3",
        "-Zmir-opt-level=2",
        "-Zmir-opt-level=1",
        "-Zmir-opt-level=0",
        "-Zunsound-mir-opts",
        "-Zcrate-attr=feature(abi_vectorcall)",
        "-Zcrate-attr=feature(anonymous_lifetime_in_impl_trait)",
        "-Zcrate-attr=feature(generic_assert)",
        "-Zcrate-attr=feature(lifetime_capture_rules_2024)",
        "-Zcrate-attr=feature(link_cfg)",
        "-Zcrate-attr=feature(multiple_supertrait_upcastable)",
        "-Zcrate-attr=feature(with_negative_coherence)",
        "-Zcrate-attr=feature(auto_traits)",
        "-Zcrate-attr=feature(box_patterns)",
        "-Zcrate-attr=feature(doc_notable_trait)",
        "-Zcrate-attr=feature(dropck_eyepatch)",
        "-Zcrate-attr=feature(fundamental)",
        "-Zcrate-attr=feature(linkage)",
        "-Zcrate-attr=feature(rustc_private)",
        "-Zcrate-attr=feature(rustdoc_missing_doc_code_examples)",
        "-Zcrate-attr=feature(start)",
        "-Zcrate-attr=feature(structural_match)",
        "-Zcrate-attr=feature(unboxed_closures)",
        "-Zcrate-attr=feature(aarch64_ver_target_feature)",
        "-Zcrate-attr=feature(arm_target_feature)",
        "-Zcrate-attr=feature(avx512_target_feature)",
        "-Zcrate-attr=feature(bpf_target_feature)",
        "-Zcrate-attr=feature(csky_target_feature)",
        "-Zcrate-attr=feature(ermsb_target_feature)",
        "-Zcrate-attr=feature(hexagon_target_feature)",
        "-Zcrate-attr=feature(loongarch_target_feature)",
        "-Zcrate-attr=feature(mips_target_feature)",
        "-Zcrate-attr=feature(powerpc_target_feature)",
        "-Zcrate-attr=feature(riscv_target_feature)",
        "-Zcrate-attr=feature(rtm_target_feature)",
        "-Zcrate-attr=feature(sse4a_target_feature)",
        "-Zcrate-attr=feature(tbm_target_feature)",
        "-Zcrate-attr=feature(wasm_target_feature)",
        "-Zcrate-attr=feature(abi_avr_interrupt)",
        "-Zcrate-attr=feature(abi_c_cmse_nonsecure_call)",
        "-Zcrate-attr=feature(abi_msp430_interrupt)",
        "-Zcrate-attr=feature(abi_ptx)",
        "-Zcrate-attr=feature(abi_riscv_interrupt)",
        "-Zcrate-attr=feature(abi_x86_interrupt)",
        "-Zcrate-attr=feature(alloc_error_handler)",
        "-Zcrate-attr=feature(arbitrary_self_types)",
        "-Zcrate-attr=feature(asm_const)",
        "-Zcrate-attr=feature(asm_experimental_arch)",
        "-Zcrate-attr=feature(asm_unwind)",
        "-Zcrate-attr=feature(associated_const_equality)",
        "-Zcrate-attr=feature(associated_type_defaults)",
        "-Zcrate-attr=feature(async_closure)",
        "-Zcrate-attr=feature(async_fn_traits)",
        "-Zcrate-attr=feature(async_fn_track_caller)",
        "-Zcrate-attr=feature(async_for_loop)",
        "-Zcrate-attr=feature(builtin_syntax)",
        "-Zcrate-attr=feature(c_unwind)",
        "-Zcrate-attr=feature(c_variadic)",
        "-Zcrate-attr=feature(cfg_overflow_checks)",
        "-Zcrate-attr=feature(cfg_relocation_model)",
        "-Zcrate-attr=feature(cfg_sanitize)",
        "-Zcrate-attr=feature(cfg_sanitizer_cfi)",
        "-Zcrate-attr=feature(cfg_target_compact)",
        "-Zcrate-attr=feature(cfg_target_has_atomic)",
        "-Zcrate-attr=feature(cfg_target_has_atomic_equal_alignment)",
        "-Zcrate-attr=feature(cfg_target_thread_local)",
        "-Zcrate-attr=feature(cfg_version)",
        "-Zcrate-attr=feature(cfi_encoding)",
        "-Zcrate-attr=feature(closure_lifetime_binder)",
        "-Zcrate-attr=feature(closure_track_caller)",
        "-Zcrate-attr=feature(cmse_nonsecure_entry)",
        "-Zcrate-attr=feature(collapse_debuginfo)",
        "-Zcrate-attr=feature(const_async_blocks)",
        "-Zcrate-attr=feature(const_extern_fn)",
        "-Zcrate-attr=feature(const_fn_floating_point_arithmetic)",
        "-Zcrate-attr=feature(const_for)",
        "-Zcrate-attr=feature(const_mut_refs)",
        "-Zcrate-attr=feature(const_precise_live_drops)",
        "-Zcrate-attr=feature(const_refs_to_cell)",
        "-Zcrate-attr=feature(const_trait_impl)",
        "-Zcrate-attr=feature(const_try)",
        "-Zcrate-attr=feature(coroutine_clone)",
        "-Zcrate-attr=feature(coroutines)",
        "-Zcrate-attr=feature(coverage_attribute)",
        "-Zcrate-attr=feature(custom_code_classes_in_docs)",
        "-Zcrate-attr=feature(custom_inner_attributes)",
        "-Zcrate-attr=feature(custom_test_frameworks)",
        "-Zcrate-attr=feature(decl_macro)",
        "-Zcrate-attr=feature(default_type_parameter_fallback)",
        "-Zcrate-attr=feature(deprecated_safe)",
        "-Zcrate-attr=feature(deprecated_suggestion)",
        "-Zcrate-attr=feature(do_not_recommend)",
        "-Zcrate-attr=feature(doc_auto_cfg)",
        "-Zcrate-attr=feature(doc_cfg)",
        "-Zcrate-attr=feature(doc_cfg_hide)",
        "-Zcrate-attr=feature(doc_masked)",
        "-Zcrate-attr=feature(effects)",
        "-Zcrate-attr=feature(exclusive_range_pattern)",
        "-Zcrate-attr=feature(exhaustive_patterns)",
        "-Zcrate-attr=feature(extended_varargs_abi_support)",
        "-Zcrate-attr=feature(extern_types)",
        "-Zcrate-attr=feature(ffi_const)",
        "-Zcrate-attr=feature(ffi_pure)",
        "-Zcrate-attr=feature(fn_align)",
        "-Zcrate-attr=feature(gen_blocks)",
        "-Zcrate-attr=feature(generic_arg_infer)",
        "-Zcrate-attr=feature(half_open_range_patterns_in_slices)",
        "-Zcrate-attr=feature(if_let_guard)",
        "-Zcrate-attr=feature(impl_trait_in_assoc_type)",
        "-Zcrate-attr=feature(impl_trait_in_fn_trait_return)",
        "-Zcrate-attr=feature(inline_const)",
        "-Zcrate-attr=feature(intra_doc_pointers)",
        "-Zcrate-attr=feature(large_assignments)",
        "-Zcrate-attr=feature(let_chains)",
        "-Zcrate-attr=feature(link_arg_attribute)",
        "-Zcrate-attr=feature(lint_reasons)",
        "-Zcrate-attr=feature(macro_metavar_expr)",
        "-Zcrate-attr=feature(marker_trait_attr)",
        "-Zcrate-attr=feature(min_specialization)",
        "-Zcrate-attr=feature(more_qualified_paths)",
        "-Zcrate-attr=feature(must_not_suspend)",
        "-Zcrate-attr=feature(naked_functions)",
        "-Zcrate-attr=feature(native_link_modifiers_as_needed)",
        "-Zcrate-attr=feature(negative_impls)",
        "-Zcrate-attr=feature(never_type)",
        "-Zcrate-attr=feature(never_type_fallback)",
        "-Zcrate-attr=feature(no_core)",
        "-Zcrate-attr=feature(no_sanitize)",
        "-Zcrate-attr=feature(non_exhaustive_omitted_patterns_lint)",
        "-Zcrate-attr=feature(object_safe_for_dispatch)",
        "-Zcrate-attr=feature(offset_of_enum)",
        "-Zcrate-attr=feature(optimize_attribute)",
        "-Zcrate-attr=feature(proc_macro_hygiene)",
        "-Zcrate-attr=feature(raw_ref_op)",
        "-Zcrate-attr=feature(register_tool)",
        "-Zcrate-attr=feature(repr_simd)",
        "-Zcrate-attr=feature(rust_cold_cc)",
        "-Zcrate-attr=feature(simd_ffi)",
        "-Zcrate-attr=feature(stmt_expr_attributes)",
        "-Zcrate-attr=feature(strict_provenance)",
        "-Zcrate-attr=feature(string_deref_patterns)",
        "-Zcrate-attr=feature(target_feature_11)",
        "-Zcrate-attr=feature(thread_local)",
        "-Zcrate-attr=feature(trait_alias)",
        "-Zcrate-attr=feature(transmute_generic_consts)",
        "-Zcrate-attr=feature(transparent_unions)",
        "-Zcrate-attr=feature(trivial_bounds)",
        "-Zcrate-attr=feature(try_blocks)",
        "-Zcrate-attr=feature(type_alias_impl_trait)",
        "-Zcrate-attr=feature(type_ascription)",
        "-Zcrate-attr=feature(type_changing_struct_update)",
        "-Zcrate-attr=feature(type_privacy_lints)",
        "-Zcrate-attr=feature(unix_sigpipe)",
        "-Zcrate-attr=feature(unsized_fn_params)",
        "-Zcrate-attr=feature(unsized_tuple_coercion)",
        "-Zcrate-attr=feature(used_with_arg)",
        "-Zcrate-attr=feature(wasm_abi)",
        "-Zcrate-attr=feature(yeet_expr)",
        "-Zcrate-attr=feature(const_refs_to_static)",
        "-Zcrate-attr=feature(unnamed_fields)",
        "-Zcrate-attr=feature(deref_patterns)",
        "-Zcrate-attr=feature(postfix_match)",
        // </features>
        "-Zprint-vtable-sizes",
        "-Zunstable-options",
        "-Zvalidate-mir",
        "-Zverify-llvm-ir=yes",
        "-Zincremental-verify-ich=yes",
        "-Zdump-mir=all",
        "--emit=mir",
        "-Zprint-mono-items=eager",
        "-Zpolymorphize=on",
        "-Zalways-encode-mir",
        // "-Cpasses=lint",
        "-Zextra-const-ub-checks",
        "--edition=2015",
        "-Ztranslate-lang=en_US",
        "-Zprint-type-sizes",
        "-Zmaximal-hir-to-mir-coverage",
        "-Zstrict-init-checks=yes",
        //  "-Clto=off", // rustc_codegen_gcc
        //   "-Ztreat-err-as-bug=3",
        "-Znext-solver=coherence",
        "-Zrandomize-layout",
        "-Zinline-mir=yes",
        "-Zinline-mir-threshold=20",
        "-Zpolonius=next",
        "-Zlint-mir",
    ],
    // basic stuff, edition 2018
    &[
        "-Zmir-opt-level=5",
        "-Zmir-opt-level=3",
        "-Zmir-opt-level=2",
        "-Zmir-opt-level=1",
        "-Zmir-opt-level=0",
        "-Zunsound-mir-opts",
        "-Zcrate-attr=feature(abi_vectorcall)",
        "-Zcrate-attr=feature(anonymous_lifetime_in_impl_trait)",
        "-Zcrate-attr=feature(generic_assert)",
        "-Zcrate-attr=feature(lifetime_capture_rules_2024)",
        "-Zcrate-attr=feature(link_cfg)",
        "-Zcrate-attr=feature(multiple_supertrait_upcastable)",
        "-Zcrate-attr=feature(with_negative_coherence)",
        "-Zcrate-attr=feature(auto_traits)",
        "-Zcrate-attr=feature(box_patterns)",
        "-Zcrate-attr=feature(doc_notable_trait)",
        "-Zcrate-attr=feature(dropck_eyepatch)",
        "-Zcrate-attr=feature(fundamental)",
        "-Zcrate-attr=feature(linkage)",
        "-Zcrate-attr=feature(rustc_private)",
        "-Zcrate-attr=feature(rustdoc_missing_doc_code_examples)",
        "-Zcrate-attr=feature(start)",
        "-Zcrate-attr=feature(structural_match)",
        "-Zcrate-attr=feature(unboxed_closures)",
        "-Zcrate-attr=feature(aarch64_ver_target_feature)",
        "-Zcrate-attr=feature(arm_target_feature)",
        "-Zcrate-attr=feature(avx512_target_feature)",
        "-Zcrate-attr=feature(bpf_target_feature)",
        "-Zcrate-attr=feature(csky_target_feature)",
        "-Zcrate-attr=feature(ermsb_target_feature)",
        "-Zcrate-attr=feature(hexagon_target_feature)",
        "-Zcrate-attr=feature(loongarch_target_feature)",
        "-Zcrate-attr=feature(mips_target_feature)",
        "-Zcrate-attr=feature(powerpc_target_feature)",
        "-Zcrate-attr=feature(riscv_target_feature)",
        "-Zcrate-attr=feature(rtm_target_feature)",
        "-Zcrate-attr=feature(sse4a_target_feature)",
        "-Zcrate-attr=feature(tbm_target_feature)",
        "-Zcrate-attr=feature(wasm_target_feature)",
        "-Zcrate-attr=feature(abi_avr_interrupt)",
        "-Zcrate-attr=feature(abi_c_cmse_nonsecure_call)",
        "-Zcrate-attr=feature(abi_msp430_interrupt)",
        "-Zcrate-attr=feature(abi_ptx)",
        "-Zcrate-attr=feature(abi_riscv_interrupt)",
        "-Zcrate-attr=feature(abi_x86_interrupt)",
        "-Zcrate-attr=feature(alloc_error_handler)",
        "-Zcrate-attr=feature(arbitrary_self_types)",
        "-Zcrate-attr=feature(asm_const)",
        "-Zcrate-attr=feature(asm_experimental_arch)",
        "-Zcrate-attr=feature(asm_unwind)",
        "-Zcrate-attr=feature(associated_const_equality)",
        "-Zcrate-attr=feature(associated_type_defaults)",
        "-Zcrate-attr=feature(async_closure)",
        "-Zcrate-attr=feature(async_fn_traits)",
        "-Zcrate-attr=feature(async_fn_track_caller)",
        "-Zcrate-attr=feature(async_for_loop)",
        "-Zcrate-attr=feature(builtin_syntax)",
        "-Zcrate-attr=feature(c_unwind)",
        "-Zcrate-attr=feature(c_variadic)",
        "-Zcrate-attr=feature(cfg_overflow_checks)",
        "-Zcrate-attr=feature(cfg_relocation_model)",
        "-Zcrate-attr=feature(cfg_sanitize)",
        "-Zcrate-attr=feature(cfg_sanitizer_cfi)",
        "-Zcrate-attr=feature(cfg_target_compact)",
        "-Zcrate-attr=feature(cfg_target_has_atomic)",
        "-Zcrate-attr=feature(cfg_target_has_atomic_equal_alignment)",
        "-Zcrate-attr=feature(cfg_target_thread_local)",
        "-Zcrate-attr=feature(cfg_version)",
        "-Zcrate-attr=feature(cfi_encoding)",
        "-Zcrate-attr=feature(closure_lifetime_binder)",
        "-Zcrate-attr=feature(closure_track_caller)",
        "-Zcrate-attr=feature(cmse_nonsecure_entry)",
        "-Zcrate-attr=feature(collapse_debuginfo)",
        "-Zcrate-attr=feature(const_async_blocks)",
        "-Zcrate-attr=feature(const_extern_fn)",
        "-Zcrate-attr=feature(const_fn_floating_point_arithmetic)",
        "-Zcrate-attr=feature(const_for)",
        "-Zcrate-attr=feature(const_mut_refs)",
        "-Zcrate-attr=feature(const_precise_live_drops)",
        "-Zcrate-attr=feature(const_refs_to_cell)",
        "-Zcrate-attr=feature(const_trait_impl)",
        "-Zcrate-attr=feature(const_try)",
        "-Zcrate-attr=feature(coroutine_clone)",
        "-Zcrate-attr=feature(coroutines)",
        "-Zcrate-attr=feature(coverage_attribute)",
        "-Zcrate-attr=feature(custom_code_classes_in_docs)",
        "-Zcrate-attr=feature(custom_inner_attributes)",
        "-Zcrate-attr=feature(custom_test_frameworks)",
        "-Zcrate-attr=feature(decl_macro)",
        "-Zcrate-attr=feature(default_type_parameter_fallback)",
        "-Zcrate-attr=feature(deprecated_safe)",
        "-Zcrate-attr=feature(deprecated_suggestion)",
        "-Zcrate-attr=feature(do_not_recommend)",
        "-Zcrate-attr=feature(doc_auto_cfg)",
        "-Zcrate-attr=feature(doc_cfg)",
        "-Zcrate-attr=feature(doc_cfg_hide)",
        "-Zcrate-attr=feature(doc_masked)",
        "-Zcrate-attr=feature(effects)",
        "-Zcrate-attr=feature(exclusive_range_pattern)",
        "-Zcrate-attr=feature(exhaustive_patterns)",
        "-Zcrate-attr=feature(extended_varargs_abi_support)",
        "-Zcrate-attr=feature(extern_types)",
        "-Zcrate-attr=feature(ffi_const)",
        "-Zcrate-attr=feature(ffi_pure)",
        "-Zcrate-attr=feature(fn_align)",
        "-Zcrate-attr=feature(gen_blocks)",
        "-Zcrate-attr=feature(generic_arg_infer)",
        "-Zcrate-attr=feature(half_open_range_patterns_in_slices)",
        "-Zcrate-attr=feature(if_let_guard)",
        "-Zcrate-attr=feature(impl_trait_in_assoc_type)",
        "-Zcrate-attr=feature(impl_trait_in_fn_trait_return)",
        "-Zcrate-attr=feature(inline_const)",
        "-Zcrate-attr=feature(intra_doc_pointers)",
        "-Zcrate-attr=feature(large_assignments)",
        "-Zcrate-attr=feature(let_chains)",
        "-Zcrate-attr=feature(link_arg_attribute)",
        "-Zcrate-attr=feature(lint_reasons)",
        "-Zcrate-attr=feature(macro_metavar_expr)",
        "-Zcrate-attr=feature(marker_trait_attr)",
        "-Zcrate-attr=feature(min_specialization)",
        "-Zcrate-attr=feature(more_qualified_paths)",
        "-Zcrate-attr=feature(must_not_suspend)",
        "-Zcrate-attr=feature(naked_functions)",
        "-Zcrate-attr=feature(native_link_modifiers_as_needed)",
        "-Zcrate-attr=feature(negative_impls)",
        "-Zcrate-attr=feature(never_type)",
        "-Zcrate-attr=feature(never_type_fallback)",
        "-Zcrate-attr=feature(no_core)",
        "-Zcrate-attr=feature(no_sanitize)",
        "-Zcrate-attr=feature(non_exhaustive_omitted_patterns_lint)",
        "-Zcrate-attr=feature(object_safe_for_dispatch)",
        "-Zcrate-attr=feature(offset_of_enum)",
        "-Zcrate-attr=feature(optimize_attribute)",
        "-Zcrate-attr=feature(proc_macro_hygiene)",
        "-Zcrate-attr=feature(raw_ref_op)",
        "-Zcrate-attr=feature(register_tool)",
        "-Zcrate-attr=feature(repr_simd)",
        "-Zcrate-attr=feature(rust_cold_cc)",
        "-Zcrate-attr=feature(simd_ffi)",
        "-Zcrate-attr=feature(stmt_expr_attributes)",
        "-Zcrate-attr=feature(strict_provenance)",
        "-Zcrate-attr=feature(string_deref_patterns)",
        "-Zcrate-attr=feature(target_feature_11)",
        "-Zcrate-attr=feature(thread_local)",
        "-Zcrate-attr=feature(trait_alias)",
        "-Zcrate-attr=feature(transmute_generic_consts)",
        "-Zcrate-attr=feature(transparent_unions)",
        "-Zcrate-attr=feature(trivial_bounds)",
        "-Zcrate-attr=feature(try_blocks)",
        "-Zcrate-attr=feature(type_alias_impl_trait)",
        "-Zcrate-attr=feature(type_ascription)",
        "-Zcrate-attr=feature(type_changing_struct_update)",
        "-Zcrate-attr=feature(type_privacy_lints)",
        "-Zcrate-attr=feature(unix_sigpipe)",
        "-Zcrate-attr=feature(unsized_fn_params)",
        "-Zcrate-attr=feature(unsized_tuple_coercion)",
        "-Zcrate-attr=feature(used_with_arg)",
        "-Zcrate-attr=feature(wasm_abi)",
        "-Zcrate-attr=feature(yeet_expr)",
        "-Zcrate-attr=feature(const_refs_to_static)",
        "-Zcrate-attr=feature(unnamed_fields)",
        "-Zcrate-attr=feature(deref_patterns)",
        "-Zcrate-attr=feature(postfix_match)",
        // <features>
        "-Zprint-vtable-sizes",
        "-Zunstable-options",
        "-Zvalidate-mir",
        "-Zverify-llvm-ir=yes",
        "-Zincremental-verify-ich=yes",
        "-Zdump-mir=all",
        "--emit=mir",
        "-Zprint-mono-items=eager",
        "-Zpolymorphize=on",
        "-Zalways-encode-mir",
        //"-Cpasses=lint",
        "-Zextra-const-ub-checks",
        "--edition=2018",
        "-Ztranslate-lang=en_US",
        "-Zprint-type-sizes",
        "-Zmaximal-hir-to-mir-coverage",
        "-Zstrict-init-checks=yes",
        // "-Clto=off", // rustc_codegen_gcc
        //    "-Ztreat-err-as-bug=3",
        "-Znext-solver=coherence",
        "-Zrandomize-layout",
        "-Zinline-mir=yes",
        "-Zinline-mir-threshold=20",
        "-Zpolonius=next",
        "-Zlint-mir",
    ],
    // basic stuff, edition 2021
    &[
        "-Zmir-opt-level=5",
        "-Zmir-opt-level=3",
        "-Zmir-opt-level=2",
        "-Zmir-opt-level=1",
        "-Zmir-opt-level=0",
        "-Zunsound-mir-opts",
        "-Zcrate-attr=feature(abi_vectorcall)",
        "-Zcrate-attr=feature(anonymous_lifetime_in_impl_trait)",
        "-Zcrate-attr=feature(generic_assert)",
        "-Zcrate-attr=feature(lifetime_capture_rules_2024)",
        "-Zcrate-attr=feature(link_cfg)",
        "-Zcrate-attr=feature(multiple_supertrait_upcastable)",
        "-Zcrate-attr=feature(with_negative_coherence)",
        "-Zcrate-attr=feature(auto_traits)",
        "-Zcrate-attr=feature(box_patterns)",
        "-Zcrate-attr=feature(doc_notable_trait)",
        "-Zcrate-attr=feature(dropck_eyepatch)",
        "-Zcrate-attr=feature(fundamental)",
        "-Zcrate-attr=feature(linkage)",
        "-Zcrate-attr=feature(rustc_private)",
        "-Zcrate-attr=feature(rustdoc_missing_doc_code_examples)",
        "-Zcrate-attr=feature(start)",
        "-Zcrate-attr=feature(structural_match)",
        "-Zcrate-attr=feature(unboxed_closures)",
        "-Zcrate-attr=feature(aarch64_ver_target_feature)",
        "-Zcrate-attr=feature(arm_target_feature)",
        "-Zcrate-attr=feature(avx512_target_feature)",
        "-Zcrate-attr=feature(bpf_target_feature)",
        "-Zcrate-attr=feature(csky_target_feature)",
        "-Zcrate-attr=feature(ermsb_target_feature)",
        "-Zcrate-attr=feature(hexagon_target_feature)",
        "-Zcrate-attr=feature(loongarch_target_feature)",
        "-Zcrate-attr=feature(mips_target_feature)",
        "-Zcrate-attr=feature(powerpc_target_feature)",
        "-Zcrate-attr=feature(riscv_target_feature)",
        "-Zcrate-attr=feature(rtm_target_feature)",
        "-Zcrate-attr=feature(sse4a_target_feature)",
        "-Zcrate-attr=feature(tbm_target_feature)",
        "-Zcrate-attr=feature(wasm_target_feature)",
        "-Zcrate-attr=feature(abi_avr_interrupt)",
        "-Zcrate-attr=feature(abi_c_cmse_nonsecure_call)",
        "-Zcrate-attr=feature(abi_msp430_interrupt)",
        "-Zcrate-attr=feature(abi_ptx)",
        "-Zcrate-attr=feature(abi_riscv_interrupt)",
        "-Zcrate-attr=feature(abi_x86_interrupt)",
        "-Zcrate-attr=feature(alloc_error_handler)",
        "-Zcrate-attr=feature(arbitrary_self_types)",
        "-Zcrate-attr=feature(asm_const)",
        "-Zcrate-attr=feature(asm_experimental_arch)",
        "-Zcrate-attr=feature(asm_unwind)",
        "-Zcrate-attr=feature(associated_const_equality)",
        "-Zcrate-attr=feature(associated_type_defaults)",
        "-Zcrate-attr=feature(async_closure)",
        "-Zcrate-attr=feature(async_fn_traits)",
        "-Zcrate-attr=feature(async_fn_track_caller)",
        "-Zcrate-attr=feature(async_for_loop)",
        "-Zcrate-attr=feature(builtin_syntax)",
        "-Zcrate-attr=feature(c_unwind)",
        "-Zcrate-attr=feature(c_variadic)",
        "-Zcrate-attr=feature(cfg_overflow_checks)",
        "-Zcrate-attr=feature(cfg_relocation_model)",
        "-Zcrate-attr=feature(cfg_sanitize)",
        "-Zcrate-attr=feature(cfg_sanitizer_cfi)",
        "-Zcrate-attr=feature(cfg_target_compact)",
        "-Zcrate-attr=feature(cfg_target_has_atomic)",
        "-Zcrate-attr=feature(cfg_target_has_atomic_equal_alignment)",
        "-Zcrate-attr=feature(cfg_target_thread_local)",
        "-Zcrate-attr=feature(cfg_version)",
        "-Zcrate-attr=feature(cfi_encoding)",
        "-Zcrate-attr=feature(closure_lifetime_binder)",
        "-Zcrate-attr=feature(closure_track_caller)",
        "-Zcrate-attr=feature(cmse_nonsecure_entry)",
        "-Zcrate-attr=feature(collapse_debuginfo)",
        "-Zcrate-attr=feature(const_async_blocks)",
        "-Zcrate-attr=feature(const_extern_fn)",
        "-Zcrate-attr=feature(const_fn_floating_point_arithmetic)",
        "-Zcrate-attr=feature(const_for)",
        "-Zcrate-attr=feature(const_mut_refs)",
        "-Zcrate-attr=feature(const_precise_live_drops)",
        "-Zcrate-attr=feature(const_refs_to_cell)",
        "-Zcrate-attr=feature(const_trait_impl)",
        "-Zcrate-attr=feature(const_try)",
        "-Zcrate-attr=feature(coroutine_clone)",
        "-Zcrate-attr=feature(coroutines)",
        "-Zcrate-attr=feature(coverage_attribute)",
        "-Zcrate-attr=feature(custom_code_classes_in_docs)",
        "-Zcrate-attr=feature(custom_inner_attributes)",
        "-Zcrate-attr=feature(custom_test_frameworks)",
        "-Zcrate-attr=feature(decl_macro)",
        "-Zcrate-attr=feature(default_type_parameter_fallback)",
        "-Zcrate-attr=feature(deprecated_safe)",
        "-Zcrate-attr=feature(deprecated_suggestion)",
        "-Zcrate-attr=feature(do_not_recommend)",
        "-Zcrate-attr=feature(doc_auto_cfg)",
        "-Zcrate-attr=feature(doc_cfg)",
        "-Zcrate-attr=feature(doc_cfg_hide)",
        "-Zcrate-attr=feature(doc_masked)",
        "-Zcrate-attr=feature(effects)",
        "-Zcrate-attr=feature(exclusive_range_pattern)",
        "-Zcrate-attr=feature(exhaustive_patterns)",
        "-Zcrate-attr=feature(extended_varargs_abi_support)",
        "-Zcrate-attr=feature(extern_types)",
        "-Zcrate-attr=feature(ffi_const)",
        "-Zcrate-attr=feature(ffi_pure)",
        "-Zcrate-attr=feature(fn_align)",
        "-Zcrate-attr=feature(gen_blocks)",
        "-Zcrate-attr=feature(generic_arg_infer)",
        "-Zcrate-attr=feature(half_open_range_patterns_in_slices)",
        "-Zcrate-attr=feature(if_let_guard)",
        "-Zcrate-attr=feature(impl_trait_in_assoc_type)",
        "-Zcrate-attr=feature(impl_trait_in_fn_trait_return)",
        "-Zcrate-attr=feature(inline_const)",
        "-Zcrate-attr=feature(intra_doc_pointers)",
        "-Zcrate-attr=feature(large_assignments)",
        "-Zcrate-attr=feature(let_chains)",
        "-Zcrate-attr=feature(link_arg_attribute)",
        "-Zcrate-attr=feature(lint_reasons)",
        "-Zcrate-attr=feature(macro_metavar_expr)",
        "-Zcrate-attr=feature(marker_trait_attr)",
        "-Zcrate-attr=feature(min_specialization)",
        "-Zcrate-attr=feature(more_qualified_paths)",
        "-Zcrate-attr=feature(must_not_suspend)",
        "-Zcrate-attr=feature(naked_functions)",
        "-Zcrate-attr=feature(native_link_modifiers_as_needed)",
        "-Zcrate-attr=feature(negative_impls)",
        "-Zcrate-attr=feature(never_type)",
        "-Zcrate-attr=feature(never_type_fallback)",
        "-Zcrate-attr=feature(no_core)",
        "-Zcrate-attr=feature(no_sanitize)",
        "-Zcrate-attr=feature(non_exhaustive_omitted_patterns_lint)",
        "-Zcrate-attr=feature(object_safe_for_dispatch)",
        "-Zcrate-attr=feature(offset_of_enum)",
        "-Zcrate-attr=feature(optimize_attribute)",
        "-Zcrate-attr=feature(proc_macro_hygiene)",
        "-Zcrate-attr=feature(raw_ref_op)",
        "-Zcrate-attr=feature(register_tool)",
        "-Zcrate-attr=feature(repr_simd)",
        "-Zcrate-attr=feature(rust_cold_cc)",
        "-Zcrate-attr=feature(simd_ffi)",
        "-Zcrate-attr=feature(stmt_expr_attributes)",
        "-Zcrate-attr=feature(strict_provenance)",
        "-Zcrate-attr=feature(string_deref_patterns)",
        "-Zcrate-attr=feature(target_feature_11)",
        "-Zcrate-attr=feature(thread_local)",
        "-Zcrate-attr=feature(trait_alias)",
        "-Zcrate-attr=feature(transmute_generic_consts)",
        "-Zcrate-attr=feature(transparent_unions)",
        "-Zcrate-attr=feature(trivial_bounds)",
        "-Zcrate-attr=feature(try_blocks)",
        "-Zcrate-attr=feature(type_alias_impl_trait)",
        "-Zcrate-attr=feature(type_ascription)",
        "-Zcrate-attr=feature(type_changing_struct_update)",
        "-Zcrate-attr=feature(type_privacy_lints)",
        "-Zcrate-attr=feature(unix_sigpipe)",
        "-Zcrate-attr=feature(unsized_fn_params)",
        "-Zcrate-attr=feature(unsized_tuple_coercion)",
        "-Zcrate-attr=feature(used_with_arg)",
        "-Zcrate-attr=feature(wasm_abi)",
        "-Zcrate-attr=feature(yeet_expr)",
        "-Zcrate-attr=feature(const_refs_to_static)",
        "-Zcrate-attr=feature(unnamed_fields)",
        "-Zcrate-attr=feature(deref_patterns)",
        "-Zcrate-attr=feature(postfix_match)",
        // </features>
        "-Zprint-vtable-sizes",
        "-Zunstable-options",
        "-Zvalidate-mir",
        "-Zverify-llvm-ir=yes",
        "-Zincremental-verify-ich=yes",
        "-Zdump-mir=all",
        "--emit=mir",
        "-Zprint-mono-items=eager",
        "-Zpolymorphize=on",
        "-Zalways-encode-mir",
        // "-Cpasses=lint",
        "-Zextra-const-ub-checks",
        "--edition=2021",
        "-Ztranslate-lang=en_US",
        "-Zprint-type-sizes",
        "-Zmaximal-hir-to-mir-coverage",
        // "-Clto=off", // rustc_codegen_gcc
        //   "-Ztreat-err-as-bug=3",
        "-Znext-solver=coherence",
        "-Zrandomize-layout",
        "-Zinline-mir=yes",
        "-Zinline-mir-threshold=20",
        "-Zpolonius=next",
        "-Zlint-mir",
    ],
    // edition 2024
    &[
        /* "-Zsanitizer=cfi",
        "-Clto",
        "-Zsanitizer-cfi-normalize-integers",
        "-Ccodegen-units=1",
        "-ocodegen",
        "-Cdebuginfo=2",
        "-Copt-level=3",*/
        "-Zmir-opt-level=5",
        "-Zvalidate-mir",
        "-Zunstable-options",
        "--edition=2024",
        "-Zinline-mir=yes",
        "-Zinline-mir-threshold=20",
        "-Zinline-mir",
        "-Zcross-crate-inline-threshold=always",
        "-Zinline-mir-threshold=300",
        "-Zlint-mir",
        // need codegen
        "-Zcodegen-backend=cranelift",
        "-ocodegen",
        // features
        "-Zcrate-attr=feature(abi_vectorcall)",
        "-Zcrate-attr=feature(anonymous_lifetime_in_impl_trait)",
        "-Zcrate-attr=feature(generic_assert)",
        "-Zcrate-attr=feature(lifetime_capture_rules_2024)",
        "-Zcrate-attr=feature(link_cfg)",
        "-Zcrate-attr=feature(multiple_supertrait_upcastable)",
        "-Zcrate-attr=feature(with_negative_coherence)",
        "-Zcrate-attr=feature(auto_traits)",
        "-Zcrate-attr=feature(box_patterns)",
        "-Zcrate-attr=feature(doc_notable_trait)",
        "-Zcrate-attr=feature(dropck_eyepatch)",
        "-Zcrate-attr=feature(fundamental)",
        "-Zcrate-attr=feature(linkage)",
        "-Zcrate-attr=feature(rustc_private)",
        "-Zcrate-attr=feature(rustdoc_missing_doc_code_examples)",
        "-Zcrate-attr=feature(start)",
        "-Zcrate-attr=feature(structural_match)",
        "-Zcrate-attr=feature(unboxed_closures)",
        "-Zcrate-attr=feature(aarch64_ver_target_feature)",
        "-Zcrate-attr=feature(arm_target_feature)",
        "-Zcrate-attr=feature(avx512_target_feature)",
        "-Zcrate-attr=feature(bpf_target_feature)",
        "-Zcrate-attr=feature(csky_target_feature)",
        "-Zcrate-attr=feature(ermsb_target_feature)",
        "-Zcrate-attr=feature(hexagon_target_feature)",
        "-Zcrate-attr=feature(loongarch_target_feature)",
        "-Zcrate-attr=feature(mips_target_feature)",
        "-Zcrate-attr=feature(powerpc_target_feature)",
        "-Zcrate-attr=feature(riscv_target_feature)",
        "-Zcrate-attr=feature(rtm_target_feature)",
        "-Zcrate-attr=feature(sse4a_target_feature)",
        "-Zcrate-attr=feature(tbm_target_feature)",
        "-Zcrate-attr=feature(wasm_target_feature)",
        "-Zcrate-attr=feature(abi_avr_interrupt)",
        "-Zcrate-attr=feature(abi_c_cmse_nonsecure_call)",
        "-Zcrate-attr=feature(abi_msp430_interrupt)",
        "-Zcrate-attr=feature(abi_ptx)",
        "-Zcrate-attr=feature(abi_riscv_interrupt)",
        "-Zcrate-attr=feature(abi_x86_interrupt)",
        "-Zcrate-attr=feature(alloc_error_handler)",
        "-Zcrate-attr=feature(arbitrary_self_types)",
        "-Zcrate-attr=feature(asm_const)",
        "-Zcrate-attr=feature(asm_experimental_arch)",
        "-Zcrate-attr=feature(asm_unwind)",
        "-Zcrate-attr=feature(associated_const_equality)",
        "-Zcrate-attr=feature(associated_type_defaults)",
        "-Zcrate-attr=feature(async_closure)",
        "-Zcrate-attr=feature(async_fn_traits)",
        "-Zcrate-attr=feature(async_fn_track_caller)",
        "-Zcrate-attr=feature(async_for_loop)",
        "-Zcrate-attr=feature(builtin_syntax)",
        "-Zcrate-attr=feature(c_unwind)",
        "-Zcrate-attr=feature(c_variadic)",
        "-Zcrate-attr=feature(cfg_overflow_checks)",
        "-Zcrate-attr=feature(cfg_relocation_model)",
        "-Zcrate-attr=feature(cfg_sanitize)",
        "-Zcrate-attr=feature(cfg_sanitizer_cfi)",
        "-Zcrate-attr=feature(cfg_target_compact)",
        "-Zcrate-attr=feature(cfg_target_has_atomic)",
        "-Zcrate-attr=feature(cfg_target_has_atomic_equal_alignment)",
        "-Zcrate-attr=feature(cfg_target_thread_local)",
        "-Zcrate-attr=feature(cfg_version)",
        "-Zcrate-attr=feature(cfi_encoding)",
        "-Zcrate-attr=feature(closure_lifetime_binder)",
        "-Zcrate-attr=feature(closure_track_caller)",
        "-Zcrate-attr=feature(cmse_nonsecure_entry)",
        "-Zcrate-attr=feature(collapse_debuginfo)",
        "-Zcrate-attr=feature(const_async_blocks)",
        "-Zcrate-attr=feature(const_extern_fn)",
        "-Zcrate-attr=feature(const_fn_floating_point_arithmetic)",
        "-Zcrate-attr=feature(const_for)",
        "-Zcrate-attr=feature(const_mut_refs)",
        "-Zcrate-attr=feature(const_precise_live_drops)",
        "-Zcrate-attr=feature(const_refs_to_cell)",
        "-Zcrate-attr=feature(const_trait_impl)",
        "-Zcrate-attr=feature(const_try)",
        "-Zcrate-attr=feature(coroutine_clone)",
        "-Zcrate-attr=feature(coroutines)",
        "-Zcrate-attr=feature(coverage_attribute)",
        "-Zcrate-attr=feature(custom_code_classes_in_docs)",
        "-Zcrate-attr=feature(custom_inner_attributes)",
        "-Zcrate-attr=feature(custom_test_frameworks)",
        "-Zcrate-attr=feature(decl_macro)",
        "-Zcrate-attr=feature(default_type_parameter_fallback)",
        "-Zcrate-attr=feature(deprecated_safe)",
        "-Zcrate-attr=feature(deprecated_suggestion)",
        "-Zcrate-attr=feature(do_not_recommend)",
        "-Zcrate-attr=feature(doc_auto_cfg)",
        "-Zcrate-attr=feature(doc_cfg)",
        "-Zcrate-attr=feature(doc_cfg_hide)",
        "-Zcrate-attr=feature(doc_masked)",
        "-Zcrate-attr=feature(effects)",
        "-Zcrate-attr=feature(exclusive_range_pattern)",
        "-Zcrate-attr=feature(exhaustive_patterns)",
        "-Zcrate-attr=feature(extended_varargs_abi_support)",
        "-Zcrate-attr=feature(extern_types)",
        "-Zcrate-attr=feature(ffi_const)",
        "-Zcrate-attr=feature(ffi_pure)",
        "-Zcrate-attr=feature(fn_align)",
        "-Zcrate-attr=feature(gen_blocks)",
        "-Zcrate-attr=feature(generic_arg_infer)",
        "-Zcrate-attr=feature(half_open_range_patterns_in_slices)",
        "-Zcrate-attr=feature(if_let_guard)",
        "-Zcrate-attr=feature(impl_trait_in_assoc_type)",
        "-Zcrate-attr=feature(impl_trait_in_fn_trait_return)",
        "-Zcrate-attr=feature(inline_const)",
        "-Zcrate-attr=feature(intra_doc_pointers)",
        "-Zcrate-attr=feature(large_assignments)",
        "-Zcrate-attr=feature(let_chains)",
        "-Zcrate-attr=feature(link_arg_attribute)",
        "-Zcrate-attr=feature(lint_reasons)",
        "-Zcrate-attr=feature(macro_metavar_expr)",
        "-Zcrate-attr=feature(marker_trait_attr)",
        "-Zcrate-attr=feature(min_specialization)",
        "-Zcrate-attr=feature(more_qualified_paths)",
        "-Zcrate-attr=feature(must_not_suspend)",
        "-Zcrate-attr=feature(naked_functions)",
        "-Zcrate-attr=feature(native_link_modifiers_as_needed)",
        "-Zcrate-attr=feature(negative_impls)",
        "-Zcrate-attr=feature(never_type)",
        "-Zcrate-attr=feature(never_type_fallback)",
        "-Zcrate-attr=feature(no_core)",
        "-Zcrate-attr=feature(no_sanitize)",
        "-Zcrate-attr=feature(non_exhaustive_omitted_patterns_lint)",
        "-Zcrate-attr=feature(object_safe_for_dispatch)",
        "-Zcrate-attr=feature(offset_of_enum)",
        "-Zcrate-attr=feature(optimize_attribute)",
        "-Zcrate-attr=feature(proc_macro_hygiene)",
        "-Zcrate-attr=feature(raw_ref_op)",
        "-Zcrate-attr=feature(register_tool)",
        "-Zcrate-attr=feature(repr_simd)",
        "-Zcrate-attr=feature(rust_cold_cc)",
        "-Zcrate-attr=feature(simd_ffi)",
        "-Zcrate-attr=feature(stmt_expr_attributes)",
        "-Zcrate-attr=feature(strict_provenance)",
        "-Zcrate-attr=feature(string_deref_patterns)",
        "-Zcrate-attr=feature(target_feature_11)",
        "-Zcrate-attr=feature(thread_local)",
        "-Zcrate-attr=feature(trait_alias)",
        "-Zcrate-attr=feature(transmute_generic_consts)",
        "-Zcrate-attr=feature(transparent_unions)",
        "-Zcrate-attr=feature(trivial_bounds)",
        "-Zcrate-attr=feature(try_blocks)",
        "-Zcrate-attr=feature(type_alias_impl_trait)",
        "-Zcrate-attr=feature(type_ascription)",
        "-Zcrate-attr=feature(type_changing_struct_update)",
        "-Zcrate-attr=feature(type_privacy_lints)",
        "-Zcrate-attr=feature(unix_sigpipe)",
        "-Zcrate-attr=feature(unsized_fn_params)",
        "-Zcrate-attr=feature(unsized_tuple_coercion)",
        "-Zcrate-attr=feature(used_with_arg)",
        "-Zcrate-attr=feature(wasm_abi)",
        "-Zcrate-attr=feature(yeet_expr)",
        "-Zcrate-attr=feature(const_refs_to_static)",
        "-Zcrate-attr=feature(unnamed_fields)",
        "-Zcrate-attr=feature(deref_patterns)",
        "-Zcrate-attr=feature(postfix_match)",
        "-Clink-dead-code=true",
    ],
    /* rustc codegen gcc
    &["--edition=2021"],
    &["--edition=2015"],
    &["--edition=2018"],
    */
    // incremental compilation, keep this!
    // also this might be the only flag for default run that forces actual codegen
    &["INCR_COMP"],
    // &["-Ztrait-solver=next", "-Zvalidate-mir"],
];

static EXPENSIVE_RUSTFLAGS: &[&[&str]] = &[
    // default flags
    &[
        // lints #1
        "-Zunstable-options",
        "-Zcrate-attr=feature(strict_provenance)",
        "-Zcrate-attr=feature(must_not_suspend)",
        "-Zcrate-attr=feature(non_exhaustive_omitted_patterns_lint)",
        "-Ztranslate-lang=en_US",
        "-Zmaximal-hir-to-mir-coverage",
        // "-Clto=off", // rustc_codegen_gcc
        "--edition=2021",
        //  "-Ztreat-err-as-bug=3",
        "--cap-lints=warn",
        "--verbose",
        "-Wabsolute-paths-not-starting-with-crate",
        "-Wbox-pointers",
        "-Wdeprecated-in-future",
        "-Welided-lifetimes-in-paths",
        "-Wexplicit-outlives-requirements",
        "-Wffi-unwind-calls",
        "-Wfuzzy-provenance-casts",
        "-Wkeyword-idents",
        "-Wlet-underscore-drop",
        "-Wlossy-provenance-casts",
        "-Wmacro-use-extern-crate",
        "-Wmeta-variable-misuse",
        "-Wmissing-abi",
        "-Wmissing-copy-implementations",
        "-Wmissing-debug-implementations",
        "-Wmissing-docs",
        "-Wmultiple-supertrait-upcastable",
        "-Wmust-not-suspend",
        "-Wnon-ascii-idents",
        "-Wnon-exhaustive-omitted-patterns",
        "-Wrust-2021-incompatible-closure-captures",
        "-Wrust-2021-incompatible-or-patterns",
        "-Wrust-2021-prefixes-incompatible-syntax",
        "-Wrust-2021-prelude-collisions",
        "-Wsingle-use-lifetimes",
        "-Wtrivial-casts",
        "-Wtrivial-numeric-casts",
        "-Wunit-bindings",
        "-Wunnameable-types",
        "-Wunreachable-pub",
        "-Wunsafe-code",
        "-Wunsafe-op-in-unsafe-fn",
        "-Wunstable-features",
        "-Wunused-crate-dependencies",
        "-Wunused-extern-crates",
        "-Wunused-import-braces",
        "-Wunused-lifetimes",
        "-Wunused-macro-rules",
        "-Wunused-qualifications",
        "-Wunused-results",
        "-Wunused-tuple-struct-fields",
        "-Wvariant-size-differences",
        "-Ztranslate-lang=en_US",
    ],
    // basic stuff, edition 2015
    &[
        "-Zmir-opt-level=5",
        "-Zmir-opt-level=3",
        "-Zmir-opt-level=2",
        "-Zmir-opt-level=1",
        "-Zmir-opt-level=0",
        "-Zunsound-mir-opts",
        "-Zcrate-attr=feature(abi_vectorcall)",
        "-Zcrate-attr=feature(anonymous_lifetime_in_impl_trait)",
        "-Zcrate-attr=feature(generic_assert)",
        "-Zcrate-attr=feature(lifetime_capture_rules_2024)",
        "-Zcrate-attr=feature(link_cfg)",
        "-Zcrate-attr=feature(multiple_supertrait_upcastable)",
        "-Zcrate-attr=feature(with_negative_coherence)",
        "-Zcrate-attr=feature(auto_traits)",
        "-Zcrate-attr=feature(box_patterns)",
        "-Zcrate-attr=feature(doc_notable_trait)",
        "-Zcrate-attr=feature(dropck_eyepatch)",
        "-Zcrate-attr=feature(fundamental)",
        "-Zcrate-attr=feature(linkage)",
        "-Zcrate-attr=feature(rustc_private)",
        "-Zcrate-attr=feature(rustdoc_missing_doc_code_examples)",
        "-Zcrate-attr=feature(start)",
        "-Zcrate-attr=feature(structural_match)",
        "-Zcrate-attr=feature(unboxed_closures)",
        "-Zcrate-attr=feature(aarch64_ver_target_feature)",
        "-Zcrate-attr=feature(arm_target_feature)",
        "-Zcrate-attr=feature(avx512_target_feature)",
        "-Zcrate-attr=feature(bpf_target_feature)",
        "-Zcrate-attr=feature(csky_target_feature)",
        "-Zcrate-attr=feature(ermsb_target_feature)",
        "-Zcrate-attr=feature(hexagon_target_feature)",
        "-Zcrate-attr=feature(loongarch_target_feature)",
        "-Zcrate-attr=feature(mips_target_feature)",
        "-Zcrate-attr=feature(powerpc_target_feature)",
        "-Zcrate-attr=feature(riscv_target_feature)",
        "-Zcrate-attr=feature(rtm_target_feature)",
        "-Zcrate-attr=feature(sse4a_target_feature)",
        "-Zcrate-attr=feature(tbm_target_feature)",
        "-Zcrate-attr=feature(wasm_target_feature)",
        "-Zcrate-attr=feature(abi_avr_interrupt)",
        "-Zcrate-attr=feature(abi_c_cmse_nonsecure_call)",
        "-Zcrate-attr=feature(abi_msp430_interrupt)",
        "-Zcrate-attr=feature(abi_ptx)",
        "-Zcrate-attr=feature(abi_riscv_interrupt)",
        "-Zcrate-attr=feature(abi_x86_interrupt)",
        "-Zcrate-attr=feature(alloc_error_handler)",
        "-Zcrate-attr=feature(arbitrary_self_types)",
        "-Zcrate-attr=feature(asm_const)",
        "-Zcrate-attr=feature(asm_experimental_arch)",
        "-Zcrate-attr=feature(asm_unwind)",
        "-Zcrate-attr=feature(associated_const_equality)",
        "-Zcrate-attr=feature(associated_type_defaults)",
        "-Zcrate-attr=feature(async_closure)",
        "-Zcrate-attr=feature(async_fn_traits)",
        "-Zcrate-attr=feature(async_fn_track_caller)",
        "-Zcrate-attr=feature(async_for_loop)",
        "-Zcrate-attr=feature(builtin_syntax)",
        "-Zcrate-attr=feature(c_unwind)",
        "-Zcrate-attr=feature(c_variadic)",
        "-Zcrate-attr=feature(cfg_overflow_checks)",
        "-Zcrate-attr=feature(cfg_relocation_model)",
        "-Zcrate-attr=feature(cfg_sanitize)",
        "-Zcrate-attr=feature(cfg_sanitizer_cfi)",
        "-Zcrate-attr=feature(cfg_target_compact)",
        "-Zcrate-attr=feature(cfg_target_has_atomic)",
        "-Zcrate-attr=feature(cfg_target_has_atomic_equal_alignment)",
        "-Zcrate-attr=feature(cfg_target_thread_local)",
        "-Zcrate-attr=feature(cfg_version)",
        "-Zcrate-attr=feature(cfi_encoding)",
        "-Zcrate-attr=feature(closure_lifetime_binder)",
        "-Zcrate-attr=feature(closure_track_caller)",
        "-Zcrate-attr=feature(cmse_nonsecure_entry)",
        "-Zcrate-attr=feature(collapse_debuginfo)",
        "-Zcrate-attr=feature(const_async_blocks)",
        "-Zcrate-attr=feature(const_extern_fn)",
        "-Zcrate-attr=feature(const_fn_floating_point_arithmetic)",
        "-Zcrate-attr=feature(const_for)",
        "-Zcrate-attr=feature(const_mut_refs)",
        "-Zcrate-attr=feature(const_precise_live_drops)",
        "-Zcrate-attr=feature(const_refs_to_cell)",
        "-Zcrate-attr=feature(const_trait_impl)",
        "-Zcrate-attr=feature(const_try)",
        "-Zcrate-attr=feature(coroutine_clone)",
        "-Zcrate-attr=feature(coroutines)",
        "-Zcrate-attr=feature(coverage_attribute)",
        "-Zcrate-attr=feature(custom_code_classes_in_docs)",
        "-Zcrate-attr=feature(custom_inner_attributes)",
        "-Zcrate-attr=feature(custom_test_frameworks)",
        "-Zcrate-attr=feature(decl_macro)",
        "-Zcrate-attr=feature(default_type_parameter_fallback)",
        "-Zcrate-attr=feature(deprecated_safe)",
        "-Zcrate-attr=feature(deprecated_suggestion)",
        "-Zcrate-attr=feature(do_not_recommend)",
        "-Zcrate-attr=feature(doc_auto_cfg)",
        "-Zcrate-attr=feature(doc_cfg)",
        "-Zcrate-attr=feature(doc_cfg_hide)",
        "-Zcrate-attr=feature(doc_masked)",
        "-Zcrate-attr=feature(effects)",
        "-Zcrate-attr=feature(exclusive_range_pattern)",
        "-Zcrate-attr=feature(exhaustive_patterns)",
        "-Zcrate-attr=feature(extended_varargs_abi_support)",
        "-Zcrate-attr=feature(extern_types)",
        "-Zcrate-attr=feature(ffi_const)",
        "-Zcrate-attr=feature(ffi_pure)",
        "-Zcrate-attr=feature(fn_align)",
        "-Zcrate-attr=feature(gen_blocks)",
        "-Zcrate-attr=feature(generic_arg_infer)",
        "-Zcrate-attr=feature(half_open_range_patterns_in_slices)",
        "-Zcrate-attr=feature(if_let_guard)",
        "-Zcrate-attr=feature(impl_trait_in_assoc_type)",
        "-Zcrate-attr=feature(impl_trait_in_fn_trait_return)",
        "-Zcrate-attr=feature(inline_const)",
        "-Zcrate-attr=feature(intra_doc_pointers)",
        "-Zcrate-attr=feature(large_assignments)",
        "-Zcrate-attr=feature(let_chains)",
        "-Zcrate-attr=feature(link_arg_attribute)",
        "-Zcrate-attr=feature(lint_reasons)",
        "-Zcrate-attr=feature(macro_metavar_expr)",
        "-Zcrate-attr=feature(marker_trait_attr)",
        "-Zcrate-attr=feature(min_specialization)",
        "-Zcrate-attr=feature(more_qualified_paths)",
        "-Zcrate-attr=feature(must_not_suspend)",
        "-Zcrate-attr=feature(naked_functions)",
        "-Zcrate-attr=feature(native_link_modifiers_as_needed)",
        "-Zcrate-attr=feature(negative_impls)",
        "-Zcrate-attr=feature(never_type)",
        "-Zcrate-attr=feature(never_type_fallback)",
        "-Zcrate-attr=feature(no_core)",
        "-Zcrate-attr=feature(no_sanitize)",
        "-Zcrate-attr=feature(non_exhaustive_omitted_patterns_lint)",
        "-Zcrate-attr=feature(object_safe_for_dispatch)",
        "-Zcrate-attr=feature(offset_of_enum)",
        "-Zcrate-attr=feature(optimize_attribute)",
        "-Zcrate-attr=feature(proc_macro_hygiene)",
        "-Zcrate-attr=feature(raw_ref_op)",
        "-Zcrate-attr=feature(register_tool)",
        "-Zcrate-attr=feature(repr_simd)",
        "-Zcrate-attr=feature(rust_cold_cc)",
        "-Zcrate-attr=feature(simd_ffi)",
        "-Zcrate-attr=feature(stmt_expr_attributes)",
        "-Zcrate-attr=feature(strict_provenance)",
        "-Zcrate-attr=feature(string_deref_patterns)",
        "-Zcrate-attr=feature(target_feature_11)",
        "-Zcrate-attr=feature(thread_local)",
        "-Zcrate-attr=feature(trait_alias)",
        "-Zcrate-attr=feature(transmute_generic_consts)",
        "-Zcrate-attr=feature(transparent_unions)",
        "-Zcrate-attr=feature(trivial_bounds)",
        "-Zcrate-attr=feature(try_blocks)",
        "-Zcrate-attr=feature(type_alias_impl_trait)",
        "-Zcrate-attr=feature(type_ascription)",
        "-Zcrate-attr=feature(type_changing_struct_update)",
        "-Zcrate-attr=feature(type_privacy_lints)",
        "-Zcrate-attr=feature(unix_sigpipe)",
        "-Zcrate-attr=feature(unsized_fn_params)",
        "-Zcrate-attr=feature(unsized_tuple_coercion)",
        "-Zcrate-attr=feature(used_with_arg)",
        "-Zcrate-attr=feature(wasm_abi)",
        "-Zcrate-attr=feature(yeet_expr)",
        "-Zcrate-attr=feature(const_refs_to_static)",
        "-Zcrate-attr=feature(unnamed_fields)",
        "-Zcrate-attr=feature(postfix_match)",
        // </features>
        "-Zprint-vtable-sizes",
        "-Zunstable-options",
        "-Zvalidate-mir",
        "-Zverify-llvm-ir=yes",
        "-Zincremental-verify-ich=yes",
        "-Zdump-mir=all",
        "--emit=mir",
        "-Zprint-mono-items=eager",
        "-Zpolymorphize=on",
        "-Zalways-encode-mir",
        // "-Cpasses=lint",
        "-Zextra-const-ub-checks",
        "--edition=2015",
        "-Ztranslate-lang=en_US",
        "-Zprint-type-sizes",
        "-Zmaximal-hir-to-mir-coverage",
        "-Zstrict-init-checks=yes",
        //  "-Clto=off", // rustc_codegen_gcc
        //   "-Ztreat-err-as-bug=3",
        "-Znext-solver=coherence",
        "-Zrandomize-layout",
        "-Zinline-mir=yes",
        "-Zinline-mir-threshold=20",
        "-Zpolonius=next",
        "-Zlint-mir",
    ],
    // basic stuff, edition 2018
    &[
        "-Zmir-opt-level=5",
        "-Zmir-opt-level=3",
        "-Zmir-opt-level=2",
        "-Zmir-opt-level=1",
        "-Zmir-opt-level=0",
        "-Zunsound-mir-opts",
        "-Zcrate-attr=feature(abi_vectorcall)",
        "-Zcrate-attr=feature(anonymous_lifetime_in_impl_trait)",
        "-Zcrate-attr=feature(generic_assert)",
        "-Zcrate-attr=feature(lifetime_capture_rules_2024)",
        "-Zcrate-attr=feature(link_cfg)",
        "-Zcrate-attr=feature(multiple_supertrait_upcastable)",
        "-Zcrate-attr=feature(with_negative_coherence)",
        "-Zcrate-attr=feature(auto_traits)",
        "-Zcrate-attr=feature(box_patterns)",
        "-Zcrate-attr=feature(doc_notable_trait)",
        "-Zcrate-attr=feature(dropck_eyepatch)",
        "-Zcrate-attr=feature(fundamental)",
        "-Zcrate-attr=feature(linkage)",
        "-Zcrate-attr=feature(rustc_private)",
        "-Zcrate-attr=feature(rustdoc_missing_doc_code_examples)",
        "-Zcrate-attr=feature(start)",
        "-Zcrate-attr=feature(structural_match)",
        "-Zcrate-attr=feature(unboxed_closures)",
        "-Zcrate-attr=feature(aarch64_ver_target_feature)",
        "-Zcrate-attr=feature(arm_target_feature)",
        "-Zcrate-attr=feature(avx512_target_feature)",
        "-Zcrate-attr=feature(bpf_target_feature)",
        "-Zcrate-attr=feature(csky_target_feature)",
        "-Zcrate-attr=feature(ermsb_target_feature)",
        "-Zcrate-attr=feature(hexagon_target_feature)",
        "-Zcrate-attr=feature(loongarch_target_feature)",
        "-Zcrate-attr=feature(mips_target_feature)",
        "-Zcrate-attr=feature(powerpc_target_feature)",
        "-Zcrate-attr=feature(riscv_target_feature)",
        "-Zcrate-attr=feature(rtm_target_feature)",
        "-Zcrate-attr=feature(sse4a_target_feature)",
        "-Zcrate-attr=feature(tbm_target_feature)",
        "-Zcrate-attr=feature(wasm_target_feature)",
        "-Zcrate-attr=feature(abi_avr_interrupt)",
        "-Zcrate-attr=feature(abi_c_cmse_nonsecure_call)",
        "-Zcrate-attr=feature(abi_msp430_interrupt)",
        "-Zcrate-attr=feature(abi_ptx)",
        "-Zcrate-attr=feature(abi_riscv_interrupt)",
        "-Zcrate-attr=feature(abi_x86_interrupt)",
        "-Zcrate-attr=feature(alloc_error_handler)",
        "-Zcrate-attr=feature(arbitrary_self_types)",
        "-Zcrate-attr=feature(asm_const)",
        "-Zcrate-attr=feature(asm_experimental_arch)",
        "-Zcrate-attr=feature(asm_unwind)",
        "-Zcrate-attr=feature(associated_const_equality)",
        "-Zcrate-attr=feature(associated_type_defaults)",
        "-Zcrate-attr=feature(async_closure)",
        "-Zcrate-attr=feature(async_fn_traits)",
        "-Zcrate-attr=feature(async_fn_track_caller)",
        "-Zcrate-attr=feature(async_for_loop)",
        "-Zcrate-attr=feature(builtin_syntax)",
        "-Zcrate-attr=feature(c_unwind)",
        "-Zcrate-attr=feature(c_variadic)",
        "-Zcrate-attr=feature(cfg_overflow_checks)",
        "-Zcrate-attr=feature(cfg_relocation_model)",
        "-Zcrate-attr=feature(cfg_sanitize)",
        "-Zcrate-attr=feature(cfg_sanitizer_cfi)",
        "-Zcrate-attr=feature(cfg_target_compact)",
        "-Zcrate-attr=feature(cfg_target_has_atomic)",
        "-Zcrate-attr=feature(cfg_target_has_atomic_equal_alignment)",
        "-Zcrate-attr=feature(cfg_target_thread_local)",
        "-Zcrate-attr=feature(cfg_version)",
        "-Zcrate-attr=feature(cfi_encoding)",
        "-Zcrate-attr=feature(closure_lifetime_binder)",
        "-Zcrate-attr=feature(closure_track_caller)",
        "-Zcrate-attr=feature(cmse_nonsecure_entry)",
        "-Zcrate-attr=feature(collapse_debuginfo)",
        "-Zcrate-attr=feature(const_async_blocks)",
        "-Zcrate-attr=feature(const_extern_fn)",
        "-Zcrate-attr=feature(const_fn_floating_point_arithmetic)",
        "-Zcrate-attr=feature(const_for)",
        "-Zcrate-attr=feature(const_mut_refs)",
        "-Zcrate-attr=feature(const_precise_live_drops)",
        "-Zcrate-attr=feature(const_refs_to_cell)",
        "-Zcrate-attr=feature(const_trait_impl)",
        "-Zcrate-attr=feature(const_try)",
        "-Zcrate-attr=feature(coroutine_clone)",
        "-Zcrate-attr=feature(coroutines)",
        "-Zcrate-attr=feature(coverage_attribute)",
        "-Zcrate-attr=feature(custom_code_classes_in_docs)",
        "-Zcrate-attr=feature(custom_inner_attributes)",
        "-Zcrate-attr=feature(custom_test_frameworks)",
        "-Zcrate-attr=feature(decl_macro)",
        "-Zcrate-attr=feature(default_type_parameter_fallback)",
        "-Zcrate-attr=feature(deprecated_safe)",
        "-Zcrate-attr=feature(deprecated_suggestion)",
        "-Zcrate-attr=feature(do_not_recommend)",
        "-Zcrate-attr=feature(doc_auto_cfg)",
        "-Zcrate-attr=feature(doc_cfg)",
        "-Zcrate-attr=feature(doc_cfg_hide)",
        "-Zcrate-attr=feature(doc_masked)",
        "-Zcrate-attr=feature(effects)",
        "-Zcrate-attr=feature(exclusive_range_pattern)",
        "-Zcrate-attr=feature(exhaustive_patterns)",
        "-Zcrate-attr=feature(extended_varargs_abi_support)",
        "-Zcrate-attr=feature(extern_types)",
        "-Zcrate-attr=feature(ffi_const)",
        "-Zcrate-attr=feature(ffi_pure)",
        "-Zcrate-attr=feature(fn_align)",
        "-Zcrate-attr=feature(gen_blocks)",
        "-Zcrate-attr=feature(generic_arg_infer)",
        "-Zcrate-attr=feature(half_open_range_patterns_in_slices)",
        "-Zcrate-attr=feature(if_let_guard)",
        "-Zcrate-attr=feature(impl_trait_in_assoc_type)",
        "-Zcrate-attr=feature(impl_trait_in_fn_trait_return)",
        "-Zcrate-attr=feature(inline_const)",
        "-Zcrate-attr=feature(intra_doc_pointers)",
        "-Zcrate-attr=feature(large_assignments)",
        "-Zcrate-attr=feature(let_chains)",
        "-Zcrate-attr=feature(link_arg_attribute)",
        "-Zcrate-attr=feature(lint_reasons)",
        "-Zcrate-attr=feature(macro_metavar_expr)",
        "-Zcrate-attr=feature(marker_trait_attr)",
        "-Zcrate-attr=feature(min_specialization)",
        "-Zcrate-attr=feature(more_qualified_paths)",
        "-Zcrate-attr=feature(must_not_suspend)",
        "-Zcrate-attr=feature(naked_functions)",
        "-Zcrate-attr=feature(native_link_modifiers_as_needed)",
        "-Zcrate-attr=feature(negative_impls)",
        "-Zcrate-attr=feature(never_type)",
        "-Zcrate-attr=feature(never_type_fallback)",
        "-Zcrate-attr=feature(no_core)",
        "-Zcrate-attr=feature(no_sanitize)",
        "-Zcrate-attr=feature(non_exhaustive_omitted_patterns_lint)",
        "-Zcrate-attr=feature(object_safe_for_dispatch)",
        "-Zcrate-attr=feature(offset_of_enum)",
        "-Zcrate-attr=feature(optimize_attribute)",
        "-Zcrate-attr=feature(proc_macro_hygiene)",
        "-Zcrate-attr=feature(raw_ref_op)",
        "-Zcrate-attr=feature(register_tool)",
        "-Zcrate-attr=feature(repr_simd)",
        "-Zcrate-attr=feature(rust_cold_cc)",
        "-Zcrate-attr=feature(simd_ffi)",
        "-Zcrate-attr=feature(stmt_expr_attributes)",
        "-Zcrate-attr=feature(strict_provenance)",
        "-Zcrate-attr=feature(string_deref_patterns)",
        "-Zcrate-attr=feature(target_feature_11)",
        "-Zcrate-attr=feature(thread_local)",
        "-Zcrate-attr=feature(trait_alias)",
        "-Zcrate-attr=feature(transmute_generic_consts)",
        "-Zcrate-attr=feature(transparent_unions)",
        "-Zcrate-attr=feature(trivial_bounds)",
        "-Zcrate-attr=feature(try_blocks)",
        "-Zcrate-attr=feature(type_alias_impl_trait)",
        "-Zcrate-attr=feature(type_ascription)",
        "-Zcrate-attr=feature(type_changing_struct_update)",
        "-Zcrate-attr=feature(type_privacy_lints)",
        "-Zcrate-attr=feature(unix_sigpipe)",
        "-Zcrate-attr=feature(unsized_fn_params)",
        "-Zcrate-attr=feature(unsized_tuple_coercion)",
        "-Zcrate-attr=feature(used_with_arg)",
        "-Zcrate-attr=feature(wasm_abi)",
        "-Zcrate-attr=feature(yeet_expr)",
        "-Zcrate-attr=feature(const_refs_to_static)",
        "-Zcrate-attr=feature(unnamed_fields)",
        "-Zcrate-attr=feature(postfix_match)",
        // <features>
        "-Zprint-vtable-sizes",
        "-Zunstable-options",
        "-Zvalidate-mir",
        "-Zverify-llvm-ir=yes",
        "-Zincremental-verify-ich=yes",
        "-Zdump-mir=all",
        "--emit=mir",
        "-Zprint-mono-items=eager",
        "-Zpolymorphize=on",
        "-Zalways-encode-mir",
        //"-Cpasses=lint",
        "-Zextra-const-ub-checks",
        "--edition=2018",
        "-Ztranslate-lang=en_US",
        "-Zprint-type-sizes",
        "-Zmaximal-hir-to-mir-coverage",
        "-Zstrict-init-checks=yes",
        // "-Clto=off", // rustc_codegen_gcc
        //    "-Ztreat-err-as-bug=3",
        "-Znext-solver=coherence",
        "-Zrandomize-layout",
        "-Zinline-mir=yes",
        "-Zverify-llvm-ir=yes",
        "-Zinline-mir-threshold=20",
        "-Zpolonius=next",
        "-Zlint-mir",
    ],
    // basic stuff, edition 2021
    &[
        "-Zmir-opt-level=5",
        "-Zmir-opt-level=3",
        "-Zmir-opt-level=2",
        "-Zmir-opt-level=1",
        "-Zmir-opt-level=0",
        "-Zunsound-mir-opts",
        "-Zcrate-attr=feature(abi_vectorcall)",
        "-Zcrate-attr=feature(anonymous_lifetime_in_impl_trait)",
        "-Zcrate-attr=feature(generic_assert)",
        "-Zcrate-attr=feature(lifetime_capture_rules_2024)",
        "-Zcrate-attr=feature(link_cfg)",
        "-Zcrate-attr=feature(multiple_supertrait_upcastable)",
        "-Zcrate-attr=feature(with_negative_coherence)",
        "-Zcrate-attr=feature(auto_traits)",
        "-Zcrate-attr=feature(box_patterns)",
        "-Zcrate-attr=feature(doc_notable_trait)",
        "-Zcrate-attr=feature(dropck_eyepatch)",
        "-Zcrate-attr=feature(fundamental)",
        "-Zcrate-attr=feature(linkage)",
        "-Zcrate-attr=feature(rustc_private)",
        "-Zcrate-attr=feature(rustdoc_missing_doc_code_examples)",
        "-Zcrate-attr=feature(start)",
        "-Zcrate-attr=feature(structural_match)",
        "-Zcrate-attr=feature(unboxed_closures)",
        "-Zcrate-attr=feature(aarch64_ver_target_feature)",
        "-Zcrate-attr=feature(arm_target_feature)",
        "-Zcrate-attr=feature(avx512_target_feature)",
        "-Zcrate-attr=feature(bpf_target_feature)",
        "-Zcrate-attr=feature(csky_target_feature)",
        "-Zcrate-attr=feature(ermsb_target_feature)",
        "-Zcrate-attr=feature(hexagon_target_feature)",
        "-Zcrate-attr=feature(loongarch_target_feature)",
        "-Zcrate-attr=feature(mips_target_feature)",
        "-Zcrate-attr=feature(powerpc_target_feature)",
        "-Zcrate-attr=feature(riscv_target_feature)",
        "-Zcrate-attr=feature(rtm_target_feature)",
        "-Zcrate-attr=feature(sse4a_target_feature)",
        "-Zcrate-attr=feature(tbm_target_feature)",
        "-Zcrate-attr=feature(wasm_target_feature)",
        "-Zcrate-attr=feature(abi_avr_interrupt)",
        "-Zcrate-attr=feature(abi_c_cmse_nonsecure_call)",
        "-Zcrate-attr=feature(abi_msp430_interrupt)",
        "-Zcrate-attr=feature(abi_ptx)",
        "-Zcrate-attr=feature(abi_riscv_interrupt)",
        "-Zcrate-attr=feature(abi_x86_interrupt)",
        "-Zcrate-attr=feature(alloc_error_handler)",
        "-Zcrate-attr=feature(arbitrary_self_types)",
        "-Zcrate-attr=feature(asm_const)",
        "-Zcrate-attr=feature(asm_experimental_arch)",
        "-Zcrate-attr=feature(asm_unwind)",
        "-Zcrate-attr=feature(associated_const_equality)",
        "-Zcrate-attr=feature(associated_type_defaults)",
        "-Zcrate-attr=feature(async_closure)",
        "-Zcrate-attr=feature(async_fn_traits)",
        "-Zcrate-attr=feature(async_fn_track_caller)",
        "-Zcrate-attr=feature(async_for_loop)",
        "-Zcrate-attr=feature(builtin_syntax)",
        "-Zcrate-attr=feature(c_unwind)",
        "-Zcrate-attr=feature(c_variadic)",
        "-Zcrate-attr=feature(cfg_overflow_checks)",
        "-Zcrate-attr=feature(cfg_relocation_model)",
        "-Zcrate-attr=feature(cfg_sanitize)",
        "-Zcrate-attr=feature(cfg_sanitizer_cfi)",
        "-Zcrate-attr=feature(cfg_target_compact)",
        "-Zcrate-attr=feature(cfg_target_has_atomic)",
        "-Zcrate-attr=feature(cfg_target_has_atomic_equal_alignment)",
        "-Zcrate-attr=feature(cfg_target_thread_local)",
        "-Zcrate-attr=feature(cfg_version)",
        "-Zcrate-attr=feature(cfi_encoding)",
        "-Zcrate-attr=feature(closure_lifetime_binder)",
        "-Zcrate-attr=feature(closure_track_caller)",
        "-Zcrate-attr=feature(cmse_nonsecure_entry)",
        "-Zcrate-attr=feature(collapse_debuginfo)",
        "-Zcrate-attr=feature(const_async_blocks)",
        "-Zcrate-attr=feature(const_extern_fn)",
        "-Zcrate-attr=feature(const_fn_floating_point_arithmetic)",
        "-Zcrate-attr=feature(const_for)",
        "-Zcrate-attr=feature(const_mut_refs)",
        "-Zcrate-attr=feature(const_precise_live_drops)",
        "-Zcrate-attr=feature(const_refs_to_cell)",
        "-Zcrate-attr=feature(const_trait_impl)",
        "-Zcrate-attr=feature(const_try)",
        "-Zcrate-attr=feature(coroutine_clone)",
        "-Zcrate-attr=feature(coroutines)",
        "-Zcrate-attr=feature(coverage_attribute)",
        "-Zcrate-attr=feature(custom_code_classes_in_docs)",
        "-Zcrate-attr=feature(custom_inner_attributes)",
        "-Zcrate-attr=feature(custom_test_frameworks)",
        "-Zcrate-attr=feature(decl_macro)",
        "-Zcrate-attr=feature(default_type_parameter_fallback)",
        "-Zcrate-attr=feature(deprecated_safe)",
        "-Zcrate-attr=feature(deprecated_suggestion)",
        "-Zcrate-attr=feature(do_not_recommend)",
        "-Zcrate-attr=feature(doc_auto_cfg)",
        "-Zcrate-attr=feature(doc_cfg)",
        "-Zcrate-attr=feature(doc_cfg_hide)",
        "-Zcrate-attr=feature(doc_masked)",
        "-Zcrate-attr=feature(effects)",
        "-Zcrate-attr=feature(exclusive_range_pattern)",
        "-Zcrate-attr=feature(exhaustive_patterns)",
        "-Zcrate-attr=feature(extended_varargs_abi_support)",
        "-Zcrate-attr=feature(extern_types)",
        "-Zcrate-attr=feature(ffi_const)",
        "-Zcrate-attr=feature(ffi_pure)",
        "-Zcrate-attr=feature(fn_align)",
        "-Zcrate-attr=feature(gen_blocks)",
        "-Zcrate-attr=feature(generic_arg_infer)",
        "-Zcrate-attr=feature(half_open_range_patterns_in_slices)",
        "-Zcrate-attr=feature(if_let_guard)",
        "-Zcrate-attr=feature(impl_trait_in_assoc_type)",
        "-Zcrate-attr=feature(impl_trait_in_fn_trait_return)",
        "-Zcrate-attr=feature(inline_const)",
        "-Zcrate-attr=feature(intra_doc_pointers)",
        "-Zcrate-attr=feature(large_assignments)",
        "-Zcrate-attr=feature(let_chains)",
        "-Zcrate-attr=feature(link_arg_attribute)",
        "-Zcrate-attr=feature(lint_reasons)",
        "-Zcrate-attr=feature(macro_metavar_expr)",
        "-Zcrate-attr=feature(marker_trait_attr)",
        "-Zcrate-attr=feature(min_specialization)",
        "-Zcrate-attr=feature(more_qualified_paths)",
        "-Zcrate-attr=feature(must_not_suspend)",
        "-Zcrate-attr=feature(naked_functions)",
        "-Zcrate-attr=feature(native_link_modifiers_as_needed)",
        "-Zcrate-attr=feature(negative_impls)",
        "-Zcrate-attr=feature(never_type)",
        "-Zcrate-attr=feature(never_type_fallback)",
        "-Zcrate-attr=feature(no_core)",
        "-Zcrate-attr=feature(no_sanitize)",
        "-Zcrate-attr=feature(non_exhaustive_omitted_patterns_lint)",
        "-Zcrate-attr=feature(object_safe_for_dispatch)",
        "-Zcrate-attr=feature(offset_of_enum)",
        "-Zcrate-attr=feature(optimize_attribute)",
        "-Zcrate-attr=feature(proc_macro_hygiene)",
        "-Zcrate-attr=feature(raw_ref_op)",
        "-Zcrate-attr=feature(register_tool)",
        "-Zcrate-attr=feature(repr_simd)",
        "-Zcrate-attr=feature(rust_cold_cc)",
        "-Zcrate-attr=feature(simd_ffi)",
        "-Zcrate-attr=feature(stmt_expr_attributes)",
        "-Zcrate-attr=feature(strict_provenance)",
        "-Zcrate-attr=feature(string_deref_patterns)",
        "-Zcrate-attr=feature(target_feature_11)",
        "-Zcrate-attr=feature(thread_local)",
        "-Zcrate-attr=feature(trait_alias)",
        "-Zcrate-attr=feature(transmute_generic_consts)",
        "-Zcrate-attr=feature(transparent_unions)",
        "-Zcrate-attr=feature(trivial_bounds)",
        "-Zcrate-attr=feature(try_blocks)",
        "-Zcrate-attr=feature(type_alias_impl_trait)",
        "-Zcrate-attr=feature(type_ascription)",
        "-Zcrate-attr=feature(type_changing_struct_update)",
        "-Zcrate-attr=feature(type_privacy_lints)",
        "-Zcrate-attr=feature(unix_sigpipe)",
        "-Zcrate-attr=feature(unsized_fn_params)",
        "-Zcrate-attr=feature(unsized_tuple_coercion)",
        "-Zcrate-attr=feature(used_with_arg)",
        "-Zcrate-attr=feature(wasm_abi)",
        "-Zcrate-attr=feature(yeet_expr)",
        "-Zcrate-attr=feature(const_refs_to_static)",
        "-Zcrate-attr=feature(unnamed_fields)",
        "-Zcrate-attr=feature(postfix_match)",
        // </features>
        "-Zprint-vtable-sizes",
        "-Zunstable-options",
        "-Zvalidate-mir",
        "-Zverify-llvm-ir=yes",
        "-Zincremental-verify-ich=yes",
        "-Zdump-mir=all",
        "--emit=mir",
        "-Zprint-mono-items=eager",
        "-Zpolymorphize=on",
        "-Zalways-encode-mir",
        // "-Cpasses=lint",
        "-Zextra-const-ub-checks",
        "--edition=2021",
        "-Ztranslate-lang=en_US",
        "-Zprint-type-sizes",
        "-Zmaximal-hir-to-mir-coverage",
        // "-Clto=off", // rustc_codegen_gcc
        //   "-Ztreat-err-as-bug=3",
        "-Znext-solver=coherence",
        "-Zrandomize-layout",
        "-Zinline-mir=yes",
        "-Zinline-mir-threshold=20",
        "-Zpolonius=next",
        "-Zlint-mir",
    ],
    // edition 2024
    &[
        /* "-Zsanitizer=cfi",
        "-Clto",
        "-Zsanitizer-cfi-normalize-integers",
        "-Ccodegen-units=1",
        "-ocodegen",
        "-Cdebuginfo=2",
        "-Copt-level=3",*/
        "-Zmir-opt-level=5",
        "-Zvalidate-mir",
        "-Zunstable-options",
        "--edition=2024",
        "-Zinline-mir=yes",
        "-Zinline-mir-threshold=20",
        "-Zinline-mir",
        "-Zcross-crate-inline-threshold=always",
        "-Zinline-mir-threshold=300",
        "-Zlint-mir",
        // need codegen
        "-Zcodegen-backend=cranelift",
        "-ocodegen",
        // features
        "-Zcrate-attr=feature(abi_vectorcall)",
        "-Zcrate-attr=feature(anonymous_lifetime_in_impl_trait)",
        "-Zcrate-attr=feature(generic_assert)",
        "-Zcrate-attr=feature(lifetime_capture_rules_2024)",
        "-Zcrate-attr=feature(link_cfg)",
        "-Zcrate-attr=feature(multiple_supertrait_upcastable)",
        "-Zcrate-attr=feature(with_negative_coherence)",
        "-Zcrate-attr=feature(auto_traits)",
        "-Zcrate-attr=feature(box_patterns)",
        "-Zcrate-attr=feature(doc_notable_trait)",
        "-Zcrate-attr=feature(dropck_eyepatch)",
        "-Zcrate-attr=feature(fundamental)",
        "-Zcrate-attr=feature(linkage)",
        "-Zcrate-attr=feature(rustc_private)",
        "-Zcrate-attr=feature(rustdoc_missing_doc_code_examples)",
        "-Zcrate-attr=feature(start)",
        "-Zcrate-attr=feature(structural_match)",
        "-Zcrate-attr=feature(unboxed_closures)",
        "-Zcrate-attr=feature(aarch64_ver_target_feature)",
        "-Zcrate-attr=feature(arm_target_feature)",
        "-Zcrate-attr=feature(avx512_target_feature)",
        "-Zcrate-attr=feature(bpf_target_feature)",
        "-Zcrate-attr=feature(csky_target_feature)",
        "-Zcrate-attr=feature(ermsb_target_feature)",
        "-Zcrate-attr=feature(hexagon_target_feature)",
        "-Zcrate-attr=feature(loongarch_target_feature)",
        "-Zcrate-attr=feature(mips_target_feature)",
        "-Zcrate-attr=feature(powerpc_target_feature)",
        "-Zcrate-attr=feature(riscv_target_feature)",
        "-Zcrate-attr=feature(rtm_target_feature)",
        "-Zcrate-attr=feature(sse4a_target_feature)",
        "-Zcrate-attr=feature(tbm_target_feature)",
        "-Zcrate-attr=feature(wasm_target_feature)",
        "-Zcrate-attr=feature(abi_avr_interrupt)",
        "-Zcrate-attr=feature(abi_c_cmse_nonsecure_call)",
        "-Zcrate-attr=feature(abi_msp430_interrupt)",
        "-Zcrate-attr=feature(abi_ptx)",
        "-Zcrate-attr=feature(abi_riscv_interrupt)",
        "-Zcrate-attr=feature(abi_x86_interrupt)",
        "-Zcrate-attr=feature(alloc_error_handler)",
        "-Zcrate-attr=feature(arbitrary_self_types)",
        "-Zcrate-attr=feature(asm_const)",
        "-Zcrate-attr=feature(asm_experimental_arch)",
        "-Zcrate-attr=feature(asm_unwind)",
        "-Zcrate-attr=feature(associated_const_equality)",
        "-Zcrate-attr=feature(associated_type_defaults)",
        "-Zcrate-attr=feature(async_closure)",
        "-Zcrate-attr=feature(async_fn_traits)",
        "-Zcrate-attr=feature(async_fn_track_caller)",
        "-Zcrate-attr=feature(async_for_loop)",
        "-Zcrate-attr=feature(builtin_syntax)",
        "-Zcrate-attr=feature(c_unwind)",
        "-Zcrate-attr=feature(c_variadic)",
        "-Zcrate-attr=feature(cfg_overflow_checks)",
        "-Zcrate-attr=feature(cfg_relocation_model)",
        "-Zcrate-attr=feature(cfg_sanitize)",
        "-Zcrate-attr=feature(cfg_sanitizer_cfi)",
        "-Zcrate-attr=feature(cfg_target_compact)",
        "-Zcrate-attr=feature(cfg_target_has_atomic)",
        "-Zcrate-attr=feature(cfg_target_has_atomic_equal_alignment)",
        "-Zcrate-attr=feature(cfg_target_thread_local)",
        "-Zcrate-attr=feature(cfg_version)",
        "-Zcrate-attr=feature(cfi_encoding)",
        "-Zcrate-attr=feature(closure_lifetime_binder)",
        "-Zcrate-attr=feature(closure_track_caller)",
        "-Zcrate-attr=feature(cmse_nonsecure_entry)",
        "-Zcrate-attr=feature(collapse_debuginfo)",
        "-Zcrate-attr=feature(const_async_blocks)",
        "-Zcrate-attr=feature(const_extern_fn)",
        "-Zcrate-attr=feature(const_fn_floating_point_arithmetic)",
        "-Zcrate-attr=feature(const_for)",
        "-Zcrate-attr=feature(const_mut_refs)",
        "-Zcrate-attr=feature(const_precise_live_drops)",
        "-Zcrate-attr=feature(const_refs_to_cell)",
        "-Zcrate-attr=feature(const_trait_impl)",
        "-Zcrate-attr=feature(const_try)",
        "-Zcrate-attr=feature(coroutine_clone)",
        "-Zcrate-attr=feature(coroutines)",
        "-Zcrate-attr=feature(coverage_attribute)",
        "-Zcrate-attr=feature(custom_code_classes_in_docs)",
        "-Zcrate-attr=feature(custom_inner_attributes)",
        "-Zcrate-attr=feature(custom_test_frameworks)",
        "-Zcrate-attr=feature(decl_macro)",
        "-Zcrate-attr=feature(default_type_parameter_fallback)",
        "-Zcrate-attr=feature(deprecated_safe)",
        "-Zcrate-attr=feature(deprecated_suggestion)",
        "-Zcrate-attr=feature(do_not_recommend)",
        "-Zcrate-attr=feature(doc_auto_cfg)",
        "-Zcrate-attr=feature(doc_cfg)",
        "-Zcrate-attr=feature(doc_cfg_hide)",
        "-Zcrate-attr=feature(doc_masked)",
        "-Zcrate-attr=feature(effects)",
        "-Zcrate-attr=feature(exclusive_range_pattern)",
        "-Zcrate-attr=feature(exhaustive_patterns)",
        "-Zcrate-attr=feature(extended_varargs_abi_support)",
        "-Zcrate-attr=feature(extern_types)",
        "-Zcrate-attr=feature(ffi_const)",
        "-Zcrate-attr=feature(ffi_pure)",
        "-Zcrate-attr=feature(fn_align)",
        "-Zcrate-attr=feature(gen_blocks)",
        "-Zcrate-attr=feature(generic_arg_infer)",
        "-Zcrate-attr=feature(half_open_range_patterns_in_slices)",
        "-Zcrate-attr=feature(if_let_guard)",
        "-Zcrate-attr=feature(impl_trait_in_assoc_type)",
        "-Zcrate-attr=feature(impl_trait_in_fn_trait_return)",
        "-Zcrate-attr=feature(inline_const)",
        "-Zcrate-attr=feature(intra_doc_pointers)",
        "-Zcrate-attr=feature(large_assignments)",
        "-Zcrate-attr=feature(let_chains)",
        "-Zcrate-attr=feature(link_arg_attribute)",
        "-Zcrate-attr=feature(lint_reasons)",
        "-Zcrate-attr=feature(macro_metavar_expr)",
        "-Zcrate-attr=feature(marker_trait_attr)",
        "-Zcrate-attr=feature(min_specialization)",
        "-Zcrate-attr=feature(more_qualified_paths)",
        "-Zcrate-attr=feature(must_not_suspend)",
        "-Zcrate-attr=feature(naked_functions)",
        "-Zcrate-attr=feature(native_link_modifiers_as_needed)",
        "-Zcrate-attr=feature(negative_impls)",
        "-Zcrate-attr=feature(never_type)",
        "-Zcrate-attr=feature(never_type_fallback)",
        "-Zcrate-attr=feature(no_core)",
        "-Zcrate-attr=feature(no_sanitize)",
        "-Zcrate-attr=feature(non_exhaustive_omitted_patterns_lint)",
        "-Zcrate-attr=feature(object_safe_for_dispatch)",
        "-Zcrate-attr=feature(offset_of_enum)",
        "-Zcrate-attr=feature(optimize_attribute)",
        "-Zcrate-attr=feature(proc_macro_hygiene)",
        "-Zcrate-attr=feature(raw_ref_op)",
        "-Zcrate-attr=feature(register_tool)",
        "-Zcrate-attr=feature(repr_simd)",
        "-Zcrate-attr=feature(rust_cold_cc)",
        "-Zcrate-attr=feature(simd_ffi)",
        "-Zcrate-attr=feature(stmt_expr_attributes)",
        "-Zcrate-attr=feature(strict_provenance)",
        "-Zcrate-attr=feature(string_deref_patterns)",
        "-Zcrate-attr=feature(target_feature_11)",
        "-Zcrate-attr=feature(thread_local)",
        "-Zcrate-attr=feature(trait_alias)",
        "-Zcrate-attr=feature(transmute_generic_consts)",
        "-Zcrate-attr=feature(transparent_unions)",
        "-Zcrate-attr=feature(trivial_bounds)",
        "-Zcrate-attr=feature(try_blocks)",
        "-Zcrate-attr=feature(type_alias_impl_trait)",
        "-Zcrate-attr=feature(type_ascription)",
        "-Zcrate-attr=feature(type_changing_struct_update)",
        "-Zcrate-attr=feature(type_privacy_lints)",
        "-Zcrate-attr=feature(unix_sigpipe)",
        "-Zcrate-attr=feature(unsized_fn_params)",
        "-Zcrate-attr=feature(unsized_tuple_coercion)",
        "-Zcrate-attr=feature(used_with_arg)",
        "-Zcrate-attr=feature(wasm_abi)",
        "-Zcrate-attr=feature(yeet_expr)",
        "-Zcrate-attr=feature(const_refs_to_static)",
        "-Zcrate-attr=feature(unnamed_fields)",
        "-Zcrate-attr=feature(postfix_match)",
        "-Clink-dead-code=true",
        "-Zverify-llvm-ir=yes",
    ],
    // language features
    &[
        "-Zprint-vtable-sizes",
        "-Zunstable-options",
        "-Zvalidate-mir",
        "-Zverify-llvm-ir=yes",
        "-Zincremental-verify-ich=yes",
        "-Zdump-mir=all",
        "--emit=mir",
        "-Zprint-mono-items=eager",
        "-Zpolymorphize=on",
        "-Zalways-encode-mir",
        // "-Cpasses=lint",
        "-Zextra-const-ub-checks",
        "--edition=2021",
        "-Ztranslate-lang=en_US",
        "-Zprint-type-sizes",
        "-Zmaximal-hir-to-mir-coverage",
        // "-Clto=off", // rustc_codegen_gcc
        //   "-Ztreat-err-as-bug=3",
        "-Znext-solver=coherence",
        "-Zrandomize-layout",
        "-Zinline-mir=yes",
        "-Zinline-mir-threshold=20",
        "-Zpolonius=next",
        "-Zlint-mir",
        "-Zcrate-attr=feature(c_unwind)",
        "-Zcrate-attr=feature(const_mut_refs)",
        "-Zcrate-attr=feature(const_precise_live_drops)",
        "-Zcrate-attr=feature(const_ptr_write)",
        "-Zcrate-attr=feature(const_trait_impl)",
        "-Zcrate-attr=feature(const_try)",
        "-Zcrate-attr=feature(decl_macro)",
        "-Zcrate-attr=feature(exclusive_range_pattern)",
        "-Zcrate-attr=feature(fundamental)",
        "-Zcrate-attr=feature(min_specialization)",
        "-Zcrate-attr=feature(multiple_supertrait_upcastable)",
        "-Zcrate-attr=feature(negative_impls)",
        "-Zcrate-attr=feature(never_type)",
        "-Zcrate-attr=feature(pointer_is_aligned)",
        "-Zcrate-attr=feature(unboxed_closures)",
        "-Zcrate-attr=feature(unsized_fn_params)",
        "-Zcrate-attr=feature(with_negative_coherence)",
        "-Zcrate-attr=feature(alloc_layout_extra)",
        "-Zcrate-attr=feature(allocator_api)",
        "-Zcrate-attr=feature(array_chunks)",
        "-Zcrate-attr=feature(array_into_iter_constructors)",
        "-Zcrate-attr=feature(array_windows)",
        "-Zcrate-attr=feature(ascii_char)",
        "-Zcrate-attr=feature(assert_matches)",
        "-Zcrate-attr=feature(async_fn_traits)",
        "-Zcrate-attr=feature(async_iterator)",
        "-Zcrate-attr=feature(coerce_unsized)",
        "-Zcrate-attr=feature(const_align_of_val)",
        "-Zcrate-attr=feature(const_box)",
        "-Zcrate-attr=feature(const_cow_is_borrowed)",
        "-Zcrate-attr=feature(const_eval_select)",
        "-Zcrate-attr=feature(const_maybe_uninit_as_mut_ptr)",
        "-Zcrate-attr=feature(const_maybe_uninit_write)",
        "-Zcrate-attr=feature(const_pin)",
        "-Zcrate-attr=feature(const_refs_to_cell)",
        "-Zcrate-attr=feature(const_size_of_val)",
        "-Zcrate-attr=feature(const_waker)",
        "-Zcrate-attr=feature(deprecated_suggestion)",
        "-Zcrate-attr=feature(deref_pure_trait)",
        "-Zcrate-attr=feature(dispatch_from_dyn)",
        "-Zcrate-attr=feature(error_generic_member_access)",
        "-Zcrate-attr=feature(error_in_core)",
        "-Zcrate-attr=feature(exact_size_is_empty)",
        "-Zcrate-attr=feature(extend_one)",
        "-Zcrate-attr=feature(fn_traits)",
        "-Zcrate-attr=feature(generic_nonzero)",
        "-Zcrate-attr=feature(hasher_prefixfree_extras)",
        "-Zcrate-attr=feature(hint_assert_unchecked)",
        "-Zcrate-attr=feature(inline_const)",
        "-Zcrate-attr=feature(inplace_iteration)",
        "-Zcrate-attr=feature(iter_advance_by)",
        "-Zcrate-attr=feature(iter_next_chunk)",
        "-Zcrate-attr=feature(iter_repeat_n)",
        "-Zcrate-attr=feature(layout_for_ptr)",
        "-Zcrate-attr=feature(local_waker)",
        "-Zcrate-attr=feature(maybe_uninit_slice)",
        "-Zcrate-attr=feature(maybe_uninit_uninit_array)",
        "-Zcrate-attr=feature(maybe_uninit_uninit_array_transpose)",
        "-Zcrate-attr=feature(non_null_convenience)",
        "-Zcrate-attr=feature(pattern)",
        "-Zcrate-attr=feature(ptr_metadata)",
        "-Zcrate-attr=feature(ptr_sub_ptr)",
        "-Zcrate-attr=feature(receiver_trait)",
        "-Zcrate-attr=feature(set_ptr_value)",
        "-Zcrate-attr=feature(sized_type_properties)",
        "-Zcrate-attr=feature(slice_from_ptr_range)",
        "-Zcrate-attr=feature(slice_index_methods)",
        "-Zcrate-attr=feature(slice_ptr_get)",
        "-Zcrate-attr=feature(slice_ptr_len)",
        "-Zcrate-attr=feature(slice_range)",
        "-Zcrate-attr=feature(strict_provenance)",
        "-Zcrate-attr=feature(trusted_fused)",
        "-Zcrate-attr=feature(trusted_len)",
        "-Zcrate-attr=feature(trusted_random_access)",
        "-Zcrate-attr=feature(try_trait_v2)",
        "-Zcrate-attr=feature(try_with_capacity)",
        "-Zcrate-attr=feature(tuple_trait)",
        "-Zcrate-attr=feature(unchecked_math)",
        "-Zcrate-attr=feature(unsize)",
        "-Zcrate-attr=feature(utf8_chunks)",
        "-Zcrate-attr=feature(vec_pop_if)",
    ],
    &["-Zmir-opt-level=0", "-ocodegen", "-Zverify-llvm-ir=yes"],
    &[
        "-Copt-level=3",
        "-Zmir-opt-level=0",
        "-ocodegen",
        "-Zverify-llvm-ir=yes",
    ],
    &[
        "-Copt-level=0",
        "-Zmir-opt-level=5",
        "-ocodegen",
        "-Zverify-llvm-ir=yes",
    ],
    // incremental compilation, keep this!
    &["INCR_COMP"],
    // &["-Zborrowck=mir", "-Zcrate-attr=feature(nll)"],
    // temporary disable these for more throughput... haven't found new bugs with these in a long time

    // Zunprettty etc cant be combined unfortunately
    &["-Zinstrument-xray", "-Cdebuginfo=2", "-ocodeggen"],
    &["-Cinstrument-coverage", "-ocodegen"],
    &["-Cprofile-generate=/tmp/icemaker_pgo/", "-ocodegen"],
    &["-Copt-level=z", "-ocodegen"],
    &["-Zunpretty=normal"],
    &["-Zunpretty=identified"],
    &["-Zunpretty=expanded"],
    &["-Zunpretty=expanded,identified"],
    &["-Zunpretty=ast-tree"],
    &["-Zunpretty=ast-tree,expanded"],
    &["-Zunpretty=hir"],
    &["-Zunpretty=hir,identified"],
    &["-Zunpretty=hir-tree"],
    &["-Zunpretty=thir-tree"],
    &["-Zunpretty=hir,typed"],
    &["-Zunpretty=expanded,hygiene"],
    &["-Zunpretty=mir"],
    &["-Zunpretty=stable-mir"],
    &["-Zunpretty=mir-cfg"],
    &["-Zdump-mir=all", "-Zdump-mir-dataflow"],
    // Sanitizers
    &[
        "-Zunstable-options",
        "-Zmir-opt-level=3",
        "-Cdebuginfo=2",
        "-Copt-level=3",
        "-Zsanitizer=address",
        "-Clto",
        "-ocodegen",
        "-Zverify-llvm-ir=yes",
    ],
    &[
        "-Zmir-opt-level=3",
        "-Cdebuginfo=2",
        "-Copt-level=3",
        "-Zsanitizer=cfi",
        "-Ccodegen-units=1",
        "-Clto",
        "-ocodegen",
        "-Zsanitizer-cfi-normalize-integers=yes",
        "-Zsanitizer-cfi-generalize-pointers=yes",
        "-Zsanitizer-cfi-canonical-jump-tables=yes",
        "-Zverify-llvm-ir=yes",
    ],
    &[
        "-Zunstable-options",
        "-Zmir-opt-level=3",
        "-Cdebuginfo=2",
        "-Copt-level=3",
        "-Zsanitizer=leak",
        "-Clto",
        "-ocodegen",
        "-Zverify-llvm-ir=yes",
    ],
    &[
        "-Zunstable-options",
        "-Zmir-opt-level=3",
        "-Cdebuginfo=2",
        "-Copt-level=3",
        "-Zsanitizer=memory",
        "-Clto",
        "-ocodegen",
        "-Zverify-llvm-ir=yes",
    ],
    &[
        "-Zunstable-options",
        "-Zmir-opt-level=3",
        "-Cdebuginfo=2",
        "-Copt-level=3",
        "-Zsanitizer=thread",
        "-Clto",
        "-ocodegen",
        "-Zverify-llvm-ir=yes",
    ],
    &[
        "-Zunstable-options",
        "-Zvalidate-mir",
        "-Cdebuginfo=2",
        "--crate-type=bin",
        "-Copt-level=3",
        "-ocodegen",
        "-Zverify-llvm-ir=yes",
    ],
    &[
        "-Zunstable-options",
        "-Zvalidate-mir",
        "-Cdebuginfo=2",
        "--crate-type=lib",
        "-Copt-level=3",
        "-ocodegen",
        "-Zverify-llvm-ir=yes",
    ],
    // chalk is not ready yet, but polonius?
    /*
    &["-Zchalk"],
    &["-Zpolonius"],
    */
    // SLOOOOOOW
    // &["-Zvirtual-function-elimination=yes", "-Clto=fat"],

    // llvm fuzzing \o/
    /*
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=alderlake",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=amdfam10",
    ],
    /*   &[
         "-ocodegen",
         "-Copt-level=3",
         "-Clto=fat",
         "-Ctarget-cpu=athlon-4",
     ],
    &[
         "-ocodegen",
         "-Copt-level=3",
         "-Clto=fat",
         "-Ctarget-cpu=athlon",
     ],
     &[
         "-ocodegen",
         "-Copt-level=3",
         "-Clto=fat",
         "-Ctarget-cpu=athlon-fx",
     ],
       &[
         "-ocodegen",
         "-Copt-level=3",
         "-Clto=fat",
         "-Ctarget-cpu=athlon-mp",
     ],
     &[
         "-ocodegen",
         "-Copt-level=3",
         "-Clto=fat",
         "-Ctarget-cpu=athlon-tbird",
     ],
     &[
         "-ocodegen",
         "-Copt-level=3",
         "-Clto=fat",
         "-Ctarget-cpu=athlon-xp",
     ], */
    // ^ LLVM ERROR: 64-bit code requested on a subtarget that doesn't support it!
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=athlon64",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=athlon64-sse3",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=atom",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=barcelona",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=bdver1",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=bdver2",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=bdver3",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=bdver4",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=bonnell",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=broadwell",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=btver1",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=btver2",
    ],
    /*    &["-ocodegen", "-Copt-level=3", "-Clto=fat", "-Ctarget-cpu=c3"],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=c3-2",
    ], */
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=cannonlake",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=cascadelake",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=cooperlake",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=core-avx-i",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=core-avx2",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=core2",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=corei7",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=corei7-avx",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=generic",
    ],
    /*    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=geode",
    ], */
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=goldmont",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=goldmont-plus",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=haswell",
    ],
    /*   &[
         "-ocodegen",
         "-Copt-level=3",
         "-Clto=fat",
         "-Ctarget-cpu=i386",
     ],
    &[
         "-ocodegen",
         "-Copt-level=3",
         "-Clto=fat",
         "-Ctarget-cpu=i486",
     ],
     &[
         "-ocodegen",
         "-Copt-level=3",
         "-Clto=fat",
         "-Ctarget-cpu=i586",
     ],
     &[
         "-ocodegen",
         "-Copt-level=3",
         "-Clto=fat",
         "-Ctarget-cpu=i686",
     ], */
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=icelake-client",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=icelake-server",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=ivybridge",
    ],
    /*   &["-ocodegen", "-Copt-level=3", "-Clto=fat", "-Ctarget-cpu=k6"],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=k6-2",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=k6-3",
    ],*/
    &["-ocodegen", "-Copt-level=3", "-Clto=fat", "-Ctarget-cpu=k8"],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=k8-sse3",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=knl",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=knm",
    ],
    /*  &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=lakemont",
    ], */
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=nehalem",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=nocona",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=opteron",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=opteron-sse3",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=penryn",
    ],
    /*  &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=pentium",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=pentium-m",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=pentium-mmx",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=pentium2",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=pentium3",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=pentium3m",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=pentium4",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=pentium4m",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=pentiumpro",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=prescott",
    ], */
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=rocketlake",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=sandybridge",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=sapphirerapids",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=silvermont",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=skx",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=skylake",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=skylake-avx512",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=slm",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=tigerlake",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=tremont",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=westmere",
    ],
    /*   &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=winchip-c6",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=winchip2",
    ], */
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=x86-64",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=x86-64-v2",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=x86-64-v3",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=x86-64-v4",
    ],
    /* &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=yonah",
    ], */
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=znver1",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=znver2",
    ],
    &[
        "-ocodegen",
        "-Copt-level=3",
        "-Clto=fat",
        "-Ctarget-cpu=znver3",
    ], */
    /*&[
        "-Ctarget-feature=+adx",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+aes",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx2",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512bf16",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512bitalg",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512bw",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512cd",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512dq",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512er",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512f",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512gfni",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512ifma",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512pf",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512vaes",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512vbmi",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512vbmi2",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512vl",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512vnni",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512vp2intersect",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512vpclmulqdq",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512vpopcntdq",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+bmi1",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+bmi2",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+cmpxchg16b",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+ermsb",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+f16c",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fma",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fxsr",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+lzcnt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+movbe",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+pclmulqdq",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+popcnt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+rdrand",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+rdseed",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+rtm",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+sha",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+sse",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+sse2",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+sse3",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+sse4.1",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+sse4.2",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+sse4a",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+ssse3",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+tbm",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+xsave",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+xsavec",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+xsaveopt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+xsaves",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+crt-static",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+16bit-mode",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+32bit-mode",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+3dnow",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+3dnowa",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+64bit",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+64bit-mode",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+amx-bf16",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+amx-int8",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+amx-tile",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avx512fp16",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+avxvnni",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+branchfusion",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+cldemote",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+clflushopt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+clwb",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+clzero",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+cmov",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+crc32",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+cx8",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+enqcmd",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+false-deps-getmant",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+false-deps-lzcnt-tzcnt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+false-deps-mulc",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+false-deps-mullq",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+false-deps-perm",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+false-deps-popcnt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+false-deps-range",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-11bytenop",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-15bytenop",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-7bytenop",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-bextr",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-gather",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-hops",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-lzcnt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-movbe",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-scalar-fsqrt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-scalar-shift-masks",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-shld-rotate",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-variable-crosslane-shuffle",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-variable-perlane-shuffle",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-vector-fsqrt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fast-vector-shift-masks",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fma4",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fsgsbase",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+fsrm",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+harden-sls-ijmp",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+harden-sls-ret",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+hreset",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+idivl-to-divb",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+idivq-to-divl",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+invpcid",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+kl",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+lea-sp",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+lea-uses-ag",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+lvi-cfi",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+lvi-load-hardening",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+lwp",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+macrofusion",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+mmx",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+movdir64b",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+movdiri",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+mwaitx",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+nopl",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+pad-short-functions",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+pconfig",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+pku",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+prefer-128-bit",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+prefer-256-bit",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+prefer-mask-registers",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+prefetchwt1",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+prfchw",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+ptwrite",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+rdpid",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+rdpru",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+retpoline",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+retpoline-external-thunk",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+retpoline-indirect-branches",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+retpoline-indirect-calls",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+sahf",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+sbb-dep-breaking",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+serialize",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+seses",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+sgx",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+shstk",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+slow-3ops-lea",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+slow-incdec",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+slow-lea",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+slow-pmaddwd",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+slow-pmulld",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+slow-shld",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+slow-two-mem-ops",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+slow-unaligned-mem-16",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+slow-unaligned-mem-32",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+soft-float",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+sse-unaligned-mem",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+tagged-globals",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+tsxldtrk",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+uintr",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+use-glm-div-sqrt-costs",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+use-slm-arith-costs",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+vzeroupper",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+waitpkg",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+wbnoinvd",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+widekl",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+x87",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=+xop",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-adx",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-aes",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx2",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512bf16",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512bitalg",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512bw",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512cd",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512dq",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512er",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512f",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512gfni",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512ifma",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512pf",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512vaes",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512vbmi",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512vbmi2",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512vl",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512vnni",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512vp2intersect",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512vpclmulqdq",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512vpopcntdq",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-bmi1",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-bmi2",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-cmpxchg16b",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-ermsb",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-f16c",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fma",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fxsr",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-lzcnt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-movbe",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-pclmulqdq",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-popcnt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-rdrand",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-rdseed",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-rtm",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-sha",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-sse",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-sse2",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-sse3",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-sse4.1",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-sse4.2",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-sse4a",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-ssse3",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-tbm",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-xsave",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-xsavec",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-xsaveopt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-xsaves",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-crt-static",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-16bit-mode",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-32bit-mode",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-3dnow",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-3dnowa",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-64bit",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-64bit-mode",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-amx-bf16",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-amx-int8",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-amx-tile",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avx512fp16",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-avxvnni",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-branchfusion",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-cldemote",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-clflushopt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-clwb",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-clzero",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-cmov",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-crc32",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-cx8",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-enqcmd",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-false-deps-getmant",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-false-deps-lzcnt-tzcnt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-false-deps-mulc",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-false-deps-mullq",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-false-deps-perm",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-false-deps-popcnt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-false-deps-range",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-11bytenop",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-15bytenop",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-7bytenop",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-bextr",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-gather",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-hops",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-lzcnt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-movbe",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-scalar-fsqrt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-scalar-shift-masks",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-shld-rotate",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-variable-crosslane-shuffle",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-variable-perlane-shuffle",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-vector-fsqrt",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fast-vector-shift-masks",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fma4",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fsgsbase",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-fsrm",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-harden-sls-ijmp",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-harden-sls-ret",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-hreset",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-idivl-to-divb",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-idivq-to-divl",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-invpcid",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-kl",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-lea-sp",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-lea-uses-ag",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-lvi-cfi",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-lvi-load-hardening",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-lwp",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-macrofusion",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-mmx",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-movdir64b",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-movdiri",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-mwaitx",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-nopl",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-pad-short-functions",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-pconfig",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-pku",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-prefer-128-bit",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-prefer-256-bit",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-prefer-mask-registers",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-prefetchwt1",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-prfchw",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-ptwrite",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-rdpid",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-rdpru",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-retpoline",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-retpoline-external-thunk",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-retpoline-indirect-branches",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-retpoline-indirect-calls",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-sahf",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-sbb-dep-breaking",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-serialize",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-seses",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-sgx",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-shstk",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-slow-3ops-lea",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-slow-incdec",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-slow-lea",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-slow-pmaddwd",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-slow-pmulld",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-slow-shld",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-slow-two-mem-ops",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-slow-unaligned-mem-16",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-slow-unaligned-mem-32",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-soft-float",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-sse-unaligned-mem",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-tagged-globals",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-tsxldtrk",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-uintr",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-use-glm-div-sqrt-costs",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-use-slm-arith-costs",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-vzeroupper",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-waitpkg",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-wbnoinvd",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-widekl",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-x87",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ],
    &[
        "-Ctarget-feature=-xop",
        "-ocodegen",
        "-Copt-level=3",
        "-Clto",
    ], */
];

pub(crate) static RUSTC_FLAGS: Lazy<&[&[&str]]> = Lazy::new(|| {
    if Args::parse().expensive_flags {
        EXPENSIVE_RUSTFLAGS
    } else {
        // cheaper default flags
        DEFAULT_RUSTFLAGS
    }
});

pub(crate) static EXCEPTIONS: &[&str] = &[
    // runtime
    "tests/ui/closures/issue-72408-nested-closures-exponential.rs",
    "tests/ui/issues/issue-74564-if-expr-stack-overflow.rs",
    "library/stdarch/crates/core_arch/src/mod.rs", //10+ mins
    // memory
    "tests/ui/issues/issue-50811.rs",
    "tests/ui/issues/issue-29466.rs",
    "src/tools/miri/tests/run-pass/float.rs",
    "tests/ui/numbers-arithmetic/saturating-float-casts-wasm.rs",
    "tests/ui/numbers-arithmetic/saturating-float-casts-impl.rs",
    "tests/ui/numbers-arithmetic/saturating-float-casts.rs",
    "tests/ui/wrapping-int-combinations.rs",
    // glacier/memory/time:
    "fixed/23600.rs",
    "23600.rs",
    "fixed/71699.rs",
    "71699.rs",
    // runtime
    "library/stdarch/crates/core_arch/src/x86/avx512bw.rs",
    "library/stdarch/crates/core_arch/src/x86/mod.rs",
    // 3.5 hours when reporting errors :(
    "library/stdarch/crates/core_arch/src/lib.rs",
    // memory 2.0
    "tests/run-make-fulldeps/issue-47551/eh_frame-terminator.rs",
    // infinite recursion in rustdoc, can take tens of minutes in ci
    "tests/ui/recursion/issue-38591-non-regular-dropck-recursion.rs",
    "tests/ui/dropck/dropck_no_diverge_on_nonregular_2.rs",
    "tests/ui/dropck/dropck_no_diverge_on_nonregular_1.rs",
    // 900 mb output, can take 5-10 minutes
    "tests/run-make-fulldeps/issue-47551/eh_frame-terminator.rs",
    // very slow
    "library/stdarch/crates/core_arch/src/x86/mod.rs",
    "library/core/src/lib.rs",
    "library/stdarch/crates/core_arch/src/mod.rs",
    "compiler/rustc_middle/src/lib.rs",
    "library/stdarch/crates/core_arch/src/x86/avx512f.rs",
    "tests/ui/structs-enums/struct-rec/issue-84611.rs",
    "tests/ui/structs-enums/struct-rec/issue-74224.rs",
    "tests/ui/dropck/dropck_no_diverge_on_nonregular_3.rs",
    "library/portable-simd/crates/core_simd/src/lib.rs", // 12+ minutes
    "tests/ui-fulldeps/myriad-closures.rs",
    "src/tools/miri/tests/pass/float.rs",
    "library/stdarch/crates/core_arch/src/arm_shared/neon/generated.rs",
    "library/stdarch/crates/core_arch/src/aarch64/mod.rs",
    "library/stdarch/crates/core_arch/src/aarch64/neon/generated.rs",
    "library/stdarch/crates/core_arch/src/aarch64/neon/mod.rs",
    "src/tools/cargo/tests/testsuite/main.rs",
    "src/tools/clippy/clippy_lints/src/lib.rs",
    "library/stdarch/crates/stdarch-gen/src/main.rs",
    "src/tools/rust-analyzer/crates/proc-macro-srv/src/abis/abi_1_58/proc_macro/mod.rs",
    "src/tools/rust-analyzer/crates/proc-macro-srv/src/abis/abi_1_63/proc_macro/mod.rs",
    "tests/ui/issues/issue-22638.rs",
    "tests/ui/issues/issue-72933-match-stack-overflow.rs",
    "tests/ui/recursion/issue-86784.rs",
    "tests/ui/associated-types/issue-67684.rs",
];

pub(crate) static MIRI_EXCEPTIONS: &[&str] = &[
    // all of clippy as well..?
    // most of these have infinite loops in runtime
    "library/alloc/benches/vec_deque.rs",
    "library/alloc/benches/vec_deque_append.rs",
    "library/alloc/tests/vec_deque.rs",
    "tests/ui/consts/const-eval/infinite_loop.rs",
    "tests/ui/consts/promote_evaluation_unused_result.rs",
    "tests/ui/issues/issue-25579.rs",
    "tests/ui/iterators/iter-count-overflow-debug.rs",
    "tests/ui/iterators/iter-count-overflow-ndebug.rs",
    "tests/ui/iterators/iter-position-overflow-debug.rs",
    "tests/ui/iterators/iter-position-overflow-ndebug.rs",
    "tests/ui/iterators/skip-count-overflow.rs",
    "tests/ui/lint/lint-impl-fn.rs",
    "tests/ui/lint/lint-unnecessary-parens.rs",
    "tests/ui/reachable/expr_again.rs",
    "tests/ui/reachable/unreachable-code.rs",
    "tests/ui/rfc-2497-if-let-chains/irrefutable-lets.rs",
    "tests/ui/try-block/try-block-unreachable-code-lint.rs",
    "tests/ui/unreachable-code-1.rs",
    "tests/ui/unreachable-code.rs",
    "tests/ui/lint/rfc-2383-lint-reason/catch_multiple_lint_triggers.rs",
    "tests/ui/lint/suggestions.rs",
    "tests/ui/const-generics/infer_arr_len_from_pat.rs",
    "tests/ui/lint/suggestions.rs",
    "tests/ui/lint/lint-change-warnings.rs",
    "src/tools/rust-analyzer/crates/parser/test_data/parser/ok/0059_loops_in_parens.rs",
    "tests/ui/rfc-2497-if-let-chains/no-double-assigments.rs",
    "tests/ui/lint/unused_labels.rs",
    "tests/ui/polymorphization/predicates.rs",
    "tests/ui/lint/rfc-2383-lint-reason/expect_multiple_lints.rs",
    "tests/ui/impl-trait/issues/issue-55608-captures-empty-region.rs",
    "tests/ui/lint/rfc-2383-lint-reason/expect_multiple_lints.rs",
    "tests/ui/codegen/issue-88043-bb-does-not-have-terminator.rs",
    "tests/ui/pattern/usefulness/top-level-alternation.rs",
    "tests/ui/issues/issue-12860.rs",
    "tests/ui/lint/rfc-2383-lint-reason/catch_multiple_lint_triggers.rs",
    "tests/ui/threads-sendsync/issue-8827.rs",
    "tests/mir-opt/inline/inline-cycle-generic.rs",
    "tests/ui/issues/issue-73229.rs",
    "tests/ui/consts/huge-values.rs",
    "tests/ui/threads-sendsync/issue-9396.rs",
    "src/tools/rust-analyzer/crates/parser/test_data/parser/ok/0057_loop_in_call.rs",
    "tests/ui/panics/panic-set-handler.rs",
    "src/doc/book/listings/ch03-common-programming-concepts/no-listing-32-loop/src/main.rs",
    "src/doc/book/listings/ch19-advanced-features/no-listing-10-loop-returns-never/src/main.rs",
    "tests/ui/issues/issue-75704.rs",
    "tests/ui/panics/panic-set-handler.rs",
    "tests/ui/codegen/issue-88043-bb-does-not-have-terminator.rs",
    "tests/ui/issue-25579.rs",
    "tests/compile-fail/issue-25579.rs",
    "tests/ui/issue-25579.rs",
    "tests/ui/issues/issue-25579.rs",
    "src/tools/clippy/tests/ui/while_let_on_iterator.rs",
    "tests/compile-fail/borrowck/borrowck-mut-borrow-linear-errors.rs",
    "tests/compile-fail/E0165.rs",
    "tests/ui/error-codes/E0165.rs",
    "src/tools/miri/tests/pass/float.rs",
];

pub(crate) static MIRIFLAGS: &[&[&str]] = &[
    // with mir opt level
    &[
        "-Zmir-opt-level=5",
        "-Zmiri-strict-provenance",
        "-Zmiri-symbolic-alignment-check",
        "-Zmiri-tree-borrows",
        "-Cdebug-assertions",
        "-O",
    ],
    // and without
    &[
        "-Zmiri-strict-provenance",
        "-Zmiri-symbolic-alignment-check",
        "-Zmiri-mute-stdout-stderr",
        "-Zmiri-retag-fields",
        "-Zmiri-tree-borrows",
        "-Cdebug-assertions",
        //"-Zmir-opt-level=5",
        // "-Zrandomize-layout",
        "-O",
    ],
];

pub(crate) static MIRI_RUSTFLAGS: &[&[&str]] = &[
    &[
        "-Zunstable-options",
        "--edition=2015",
        "-Zvalidate-mir",
        "-Cdebug-assertions",
        /*
        "-Zcrate-attr=feature(abi_unadjusted)",
        "-Zcrate-attr=feature(abi_vectorcall)",
        "-Zcrate-attr=feature(anonymous_lifetime_in_impl_trait)",
        "-Zcrate-attr=feature(generic_assert)",
        "-Zcrate-attr=feature(lang_items)",
        "-Zcrate-attr=feature(omit_gdb_pretty_printer_section)",
        "-Zcrate-attr=feature(prelude_import)",
        "-Zcrate-attr=feature(profiler_runtime)",
        "-Zcrate-attr=feature(rustc_attrs)",
        //        "-Zcrate-attr=feature(staged_api)",
        "-Zcrate-attr=feature(test_2018_feature)",
        "-Zcrate-attr=feature(test_unstable_lint)",
        "-Zcrate-attr=feature(unsafe_pin_internals)",
        "-Zcrate-attr=feature(with_negative_coherence)",
        "-Zcrate-attr=feature(auto_traits)",
        "-Zcrate-attr=feature(box_patterns)",
        "-Zcrate-attr=feature(doc_notable_trait)",
        "-Zcrate-attr=feature(dropck_eyepatch)",
        "-Zcrate-attr=feature(fundamental)",
        "-Zcrate-attr=feature(link_llvm_intrinsics)",
        "-Zcrate-attr=feature(linkage)",
        "-Zcrate-attr=feature(needs_panic_runtime)",
        "-Zcrate-attr=feature(panic_runtime)",
        "-Zcrate-attr=feature(rustc_allow_const_fn_unstable)",
        "-Zcrate-attr=feature(rustc_private)",
        "-Zcrate-attr=feature(rustdoc_internals)",
        "-Zcrate-attr=feature(rustdoc_missing_doc_code_examples)",
        "-Zcrate-attr=feature(start)",
        "-Zcrate-attr=feature(structural_match)",
        "-Zcrate-attr=feature(unboxed_closures)",
        /*       "-Zcrate-attr=feature(aarch64_ver_target_feature)",
        "-Zcrate-attr=feature(arm_target_feature)",
        "-Zcrate-attr=feature(avx512_target_feature)",
        "-Zcrate-attr=feature(bpf_target_feature)",
        "-Zcrate-attr=feature(cmpxchg16b_target_feature)",
        "-Zcrate-attr=feature(ermsb_target_feature)",
        "-Zcrate-attr=feature(f16c_target_feature)",
        "-Zcrate-attr=feature(hexagon_target_feature)",
        "-Zcrate-attr=feature(mips_target_feature)",
        "-Zcrate-attr=feature(movbe_target_feature)",
        "-Zcrate-attr=feature(powerpc_target_feature)",
        "-Zcrate-attr=feature(riscv_target_feature)",
        "-Zcrate-attr=feature(rtm_target_feature)",
        "-Zcrate-attr=feature(sse4a_target_feature)",
        "-Zcrate-attr=feature(tbm_target_feature)",
        "-Zcrate-attr=feature(wasm_target_feature)", */
        "-Zcrate-attr=feature(abi_avr_interrupt)",
        "-Zcrate-attr=feature(abi_c_cmse_nonsecure_call)",
        "-Zcrate-attr=feature(abi_msp430_interrupt)",
        "-Zcrate-attr=feature(abi_ptx)",
        "-Zcrate-attr=feature(abi_x86_interrupt)",
        "-Zcrate-attr=feature(adt_const_params)",
        "-Zcrate-attr=feature(alloc_error_handler)",
        "-Zcrate-attr=feature(arbitrary_enum_discriminant)",
        "-Zcrate-attr=feature(arbitrary_self_types)",
        "-Zcrate-attr=feature(asm_const)",
        "-Zcrate-attr=feature(asm_experimental_arch)",
        "-Zcrate-attr=feature(asm_sym)",
        "-Zcrate-attr=feature(asm_unwind)",
        "-Zcrate-attr=feature(associated_const_equality)",
        "-Zcrate-attr=feature(associated_type_bounds)",
        "-Zcrate-attr=feature(associated_type_defaults)",
        "-Zcrate-attr=feature(async_closure)",
        "-Zcrate-attr=feature(c_unwind)",
        "-Zcrate-attr=feature(c_variadic)",
        "-Zcrate-attr=feature(cfg_sanitize)",
        "-Zcrate-attr=feature(cfg_target_compact)",
        "-Zcrate-attr=feature(cfg_target_has_atomic)",
        "-Zcrate-attr=feature(cfg_target_has_atomic_equal_alignment)",
        "-Zcrate-attr=feature(cfg_target_thread_local)",
        "-Zcrate-attr=feature(cfg_version)",
        "-Zcrate-attr=feature(closure_lifetime_binder)",
        "-Zcrate-attr=feature(closure_track_caller)",
        "-Zcrate-attr=feature(cmse_nonsecure_entry)",
        "-Zcrate-attr=feature(collapse_debuginfo)",
        "-Zcrate-attr=feature(const_async_blocks)",
        "-Zcrate-attr=feature(const_extern_fn)",
        "-Zcrate-attr=feature(const_fn_floating_point_arithmetic)",
        "-Zcrate-attr=feature(const_for)",
        "-Zcrate-attr=feature(const_mut_refs)",
        "-Zcrate-attr=feature(const_precise_live_drops)",
        "-Zcrate-attr=feature(const_refs_to_cell)",
        "-Zcrate-attr=feature(const_trait_impl)",
        "-Zcrate-attr=feature(const_try)",
        "-Zcrate-attr=feature(custom_inner_attributes)",
        "-Zcrate-attr=feature(custom_test_frameworks)",
        "-Zcrate-attr=feature(debugger_visualizer)",
        "-Zcrate-attr=feature(decl_macro)",
        "-Zcrate-attr=feature(default_alloc_error_handler)",
        "-Zcrate-attr=feature(default_type_parameter_fallback)",
        "-Zcrate-attr=feature(deprecated_safe)",
        "-Zcrate-attr=feature(deprecated_suggestion)",
        "-Zcrate-attr=feature(doc_auto_cfg)",
        "-Zcrate-attr=feature(doc_cfg)",
        "-Zcrate-attr=feature(doc_cfg_hide)",
        "-Zcrate-attr=feature(doc_masked)",
        "-Zcrate-attr=feature(dyn_star)",
        "-Zcrate-attr=feature(exclusive_range_pattern)",
        "-Zcrate-attr=feature(exhaustive_patterns)",
        "-Zcrate-attr=feature(extern_types)",
        "-Zcrate-attr=feature(ffi_const)",
        "-Zcrate-attr=feature(ffi_pure)",
        "-Zcrate-attr=feature(fn_align)",
        "-Zcrate-attr=feature(coroutine_clone)",
        "-Zcrate-attr=feature(coroutines)",
        "-Zcrate-attr=feature(generic_arg_infer)",
        "-Zcrate-attr=feature(generic_associated_types_extended)",
        "-Zcrate-attr=feature(generic_const_exprs)",
        "-Zcrate-attr=feature(half_open_range_patterns)",
        "-Zcrate-attr=feature(if_let_guard)",
        "-Zcrate-attr=feature(imported_main)",
        "-Zcrate-attr=feature(inherent_associated_types)",
        "-Zcrate-attr=feature(inline_const)",
        "-Zcrate-attr=feature(inline_const_pat)",
        "-Zcrate-attr=feature(intra_doc_pointers)",
        "-Zcrate-attr=feature(large_assignments)",
        "-Zcrate-attr=feature(let_chains)",
        "-Zcrate-attr=feature(link_cfg)",
        "-Zcrate-attr=feature(lint_reasons)",
        "-Zcrate-attr=feature(macro_metavar_expr)",
        "-Zcrate-attr=feature(marker_trait_attr)",
        "-Zcrate-attr=feature(min_specialization)",
        "-Zcrate-attr=feature(more_qualified_paths)",
        "-Zcrate-attr=feature(must_not_suspend)",
        "-Zcrate-attr=feature(naked_functions)",
        "-Zcrate-attr=feature(native_link_modifiers_as_needed)",
        "-Zcrate-attr=feature(native_link_modifiers_verbatim)",
        "-Zcrate-attr=feature(negative_impls)",
        "-Zcrate-attr=feature(never_type)",
        "-Zcrate-attr=feature(never_type_fallback)",
        "-Zcrate-attr=feature(no_core)",
        "-Zcrate-attr=feature(no_coverage)",
        "-Zcrate-attr=feature(no_sanitize)",
        "-Zcrate-attr=feature(non_exhaustive_omitted_patterns_lint)",
        "-Zcrate-attr=feature(object_safe_for_dispatch)",
        "-Zcrate-attr=feature(optimize_attribute)",
        "-Zcrate-attr=feature(plugin)",
        "-Zcrate-attr=feature(precise_pointer_size_matching)",
        "-Zcrate-attr=feature(proc_macro_hygiene)",
        "-Zcrate-attr=feature(raw_dylib)",
        "-Zcrate-attr=feature(raw_ref_op)",
        "-Zcrate-attr=feature(register_tool)",
        "-Zcrate-attr=feature(repr128)",
        "-Zcrate-attr=feature(repr_simd)",
        "-Zcrate-attr=feature(rust_cold_cc)",
        "-Zcrate-attr=feature(simd_ffi)",
        "-Zcrate-attr=feature(specialization)",
        "-Zcrate-attr=feature(stmt_expr_attributes)",
        "-Zcrate-attr=feature(strict_provenance)",
        "-Zcrate-attr=feature(target_feature_11)",
        "-Zcrate-attr=feature(thread_local)",
        "-Zcrate-attr=feature(trait_alias)",
        "-Zcrate-attr=feature(trait_upcasting)",
        "-Zcrate-attr=feature(transparent_unions)",
        "-Zcrate-attr=feature(trivial_bounds)",
        "-Zcrate-attr=feature(try_blocks)",
        "-Zcrate-attr=feature(type_alias_impl_trait)",
        "-Zcrate-attr=feature(type_ascription)",
        "-Zcrate-attr=feature(type_changing_struct_update)",
        "-Zcrate-attr=feature(unix_sigpipe)",
        "-Zcrate-attr=feature(unsized_fn_params)",
        "-Zcrate-attr=feature(unsized_locals)",
        "-Zcrate-attr=feature(unsized_tuple_coercion)",
        "-Zcrate-attr=feature(used_with_arg)",
        // "-Zcrate-attr=feature(wasm_abi)",
        "-Zcrate-attr=feature(yeet_expr)", */
    ],
    &[
        "-Zunstable-options",
        "--edition=2018",
        "-Zvalidate-mir",
        "-Cdebug-assertions",
        /*
        "-Zcrate-attr=feature(abi_unadjusted)",
        "-Zcrate-attr=feature(abi_vectorcall)",
        "-Zcrate-attr=feature(anonymous_lifetime_in_impl_trait)",
        "-Zcrate-attr=feature(generic_assert)",
        "-Zcrate-attr=feature(lang_items)",
        "-Zcrate-attr=feature(omit_gdb_pretty_printer_section)",
        "-Zcrate-attr=feature(prelude_import)",
        "-Zcrate-attr=feature(profiler_runtime)",
        "-Zcrate-attr=feature(rustc_attrs)",
        //        "-Zcrate-attr=feature(staged_api)",
        "-Zcrate-attr=feature(test_2018_feature)",
        "-Zcrate-attr=feature(test_unstable_lint)",
        "-Zcrate-attr=feature(unsafe_pin_internals)",
        "-Zcrate-attr=feature(with_negative_coherence)",
        "-Zcrate-attr=feature(auto_traits)",
        "-Zcrate-attr=feature(box_patterns)",
        "-Zcrate-attr=feature(doc_notable_trait)",
        "-Zcrate-attr=feature(dropck_eyepatch)",
        "-Zcrate-attr=feature(fundamental)",
        "-Zcrate-attr=feature(link_llvm_intrinsics)",
        "-Zcrate-attr=feature(linkage)",
        "-Zcrate-attr=feature(needs_panic_runtime)",
        "-Zcrate-attr=feature(panic_runtime)",
        "-Zcrate-attr=feature(rustc_allow_const_fn_unstable)",
        "-Zcrate-attr=feature(rustc_private)",
        "-Zcrate-attr=feature(rustdoc_internals)",
        "-Zcrate-attr=feature(rustdoc_missing_doc_code_examples)",
        "-Zcrate-attr=feature(start)",
        "-Zcrate-attr=feature(structural_match)",
        "-Zcrate-attr=feature(unboxed_closures)",
        /*  "-Zcrate-attr=feature(aarch64_ver_target_feature)",
        "-Zcrate-attr=feature(arm_target_feature)",
        "-Zcrate-attr=feature(avx512_target_feature)",
        "-Zcrate-attr=feature(bpf_target_feature)",
        "-Zcrate-attr=feature(cmpxchg16b_target_feature)",
        "-Zcrate-attr=feature(ermsb_target_feature)",
        "-Zcrate-attr=feature(f16c_target_feature)",
        "-Zcrate-attr=feature(hexagon_target_feature)",
        "-Zcrate-attr=feature(mips_target_feature)",
        "-Zcrate-attr=feature(movbe_target_feature)",
        "-Zcrate-attr=feature(powerpc_target_feature)",
        "-Zcrate-attr=feature(riscv_target_feature)",
        "-Zcrate-attr=feature(rtm_target_feature)",
        "-Zcrate-attr=feature(sse4a_target_feature)",
        "-Zcrate-attr=feature(tbm_target_feature)",
        "-Zcrate-attr=feature(wasm_target_feature)", */
        "-Zcrate-attr=feature(abi_avr_interrupt)",
        "-Zcrate-attr=feature(abi_c_cmse_nonsecure_call)",
        "-Zcrate-attr=feature(abi_efiapi)",
        "-Zcrate-attr=feature(abi_msp430_interrupt)",
        "-Zcrate-attr=feature(abi_ptx)",
        "-Zcrate-attr=feature(abi_x86_interrupt)",
        "-Zcrate-attr=feature(adt_const_params)",
        "-Zcrate-attr=feature(alloc_error_handler)",
        "-Zcrate-attr=feature(arbitrary_enum_discriminant)",
        "-Zcrate-attr=feature(arbitrary_self_types)",
        "-Zcrate-attr=feature(asm_const)",
        "-Zcrate-attr=feature(asm_experimental_arch)",
        "-Zcrate-attr=feature(asm_sym)",
        "-Zcrate-attr=feature(asm_unwind)",
        "-Zcrate-attr=feature(associated_const_equality)",
        "-Zcrate-attr=feature(associated_type_bounds)",
        "-Zcrate-attr=feature(associated_type_defaults)",
        "-Zcrate-attr=feature(async_closure)",
        "-Zcrate-attr=feature(c_unwind)",
        "-Zcrate-attr=feature(c_variadic)",
        "-Zcrate-attr=feature(cfg_sanitize)",
        "-Zcrate-attr=feature(cfg_target_compact)",
        "-Zcrate-attr=feature(cfg_target_has_atomic)",
        "-Zcrate-attr=feature(cfg_target_has_atomic_equal_alignment)",
        "-Zcrate-attr=feature(cfg_target_thread_local)",
        "-Zcrate-attr=feature(cfg_version)",
        "-Zcrate-attr=feature(closure_lifetime_binder)",
        "-Zcrate-attr=feature(closure_track_caller)",
        "-Zcrate-attr=feature(cmse_nonsecure_entry)",
        "-Zcrate-attr=feature(collapse_debuginfo)",
        "-Zcrate-attr=feature(const_async_blocks)",
        "-Zcrate-attr=feature(const_extern_fn)",
        "-Zcrate-attr=feature(const_fn_floating_point_arithmetic)",
        "-Zcrate-attr=feature(const_for)",
        "-Zcrate-attr=feature(const_mut_refs)",
        "-Zcrate-attr=feature(const_precise_live_drops)",
        "-Zcrate-attr=feature(const_refs_to_cell)",
        "-Zcrate-attr=feature(const_trait_impl)",
        "-Zcrate-attr=feature(const_try)",
        "-Zcrate-attr=feature(custom_inner_attributes)",
        "-Zcrate-attr=feature(custom_test_frameworks)",
        "-Zcrate-attr=feature(debugger_visualizer)",
        "-Zcrate-attr=feature(decl_macro)",
        "-Zcrate-attr=feature(default_alloc_error_handler)",
        "-Zcrate-attr=feature(default_type_parameter_fallback)",
        "-Zcrate-attr=feature(deprecated_safe)",
        "-Zcrate-attr=feature(deprecated_suggestion)",
        "-Zcrate-attr=feature(doc_auto_cfg)",
        "-Zcrate-attr=feature(doc_cfg)",
        "-Zcrate-attr=feature(doc_cfg_hide)",
        "-Zcrate-attr=feature(doc_masked)",
        "-Zcrate-attr=feature(dyn_star)",
        "-Zcrate-attr=feature(exclusive_range_pattern)",
        "-Zcrate-attr=feature(exhaustive_patterns)",
        "-Zcrate-attr=feature(extern_types)",
        "-Zcrate-attr=feature(ffi_const)",
        "-Zcrate-attr=feature(ffi_pure)",
        "-Zcrate-attr=feature(fn_align)",
        "-Zcrate-attr=feature(coroutine_clone)",
        "-Zcrate-attr=feature(coroutines)",
        "-Zcrate-attr=feature(generic_arg_infer)",
        "-Zcrate-attr=feature(generic_associated_types_extended)",
        "-Zcrate-attr=feature(generic_const_exprs)",
        "-Zcrate-attr=feature(half_open_range_patterns)",
        "-Zcrate-attr=feature(if_let_guard)",
        "-Zcrate-attr=feature(imported_main)",
        "-Zcrate-attr=feature(inherent_associated_types)",
        "-Zcrate-attr=feature(inline_const)",
        "-Zcrate-attr=feature(inline_const_pat)",
        "-Zcrate-attr=feature(intra_doc_pointers)",
        "-Zcrate-attr=feature(large_assignments)",
        "-Zcrate-attr=feature(let_chains)",
        "-Zcrate-attr=feature(link_cfg)",
        "-Zcrate-attr=feature(lint_reasons)",
        "-Zcrate-attr=feature(macro_metavar_expr)",
        "-Zcrate-attr=feature(marker_trait_attr)",
        "-Zcrate-attr=feature(min_specialization)",
        "-Zcrate-attr=feature(more_qualified_paths)",
        "-Zcrate-attr=feature(must_not_suspend)",
        "-Zcrate-attr=feature(naked_functions)",
        "-Zcrate-attr=feature(native_link_modifiers_as_needed)",
        "-Zcrate-attr=feature(native_link_modifiers_verbatim)",
        "-Zcrate-attr=feature(negative_impls)",
        "-Zcrate-attr=feature(never_type)",
        "-Zcrate-attr=feature(never_type_fallback)",
        "-Zcrate-attr=feature(no_core)",
        "-Zcrate-attr=feature(no_coverage)",
        "-Zcrate-attr=feature(no_sanitize)",
        "-Zcrate-attr=feature(non_exhaustive_omitted_patterns_lint)",
        "-Zcrate-attr=feature(object_safe_for_dispatch)",
        "-Zcrate-attr=feature(optimize_attribute)",
        "-Zcrate-attr=feature(plugin)",
        "-Zcrate-attr=feature(precise_pointer_size_matching)",
        "-Zcrate-attr=feature(proc_macro_hygiene)",
        "-Zcrate-attr=feature(raw_dylib)",
        "-Zcrate-attr=feature(raw_ref_op)",
        "-Zcrate-attr=feature(register_tool)",
        "-Zcrate-attr=feature(repr128)",
        "-Zcrate-attr=feature(repr_simd)",
        "-Zcrate-attr=feature(rust_cold_cc)",
        "-Zcrate-attr=feature(simd_ffi)",
        "-Zcrate-attr=feature(specialization)",
        "-Zcrate-attr=feature(stmt_expr_attributes)",
        "-Zcrate-attr=feature(strict_provenance)",
        "-Zcrate-attr=feature(target_feature_11)",
        "-Zcrate-attr=feature(thread_local)",
        "-Zcrate-attr=feature(trait_alias)",
        "-Zcrate-attr=feature(transparent_unions)",
        "-Zcrate-attr=feature(trivial_bounds)",
        "-Zcrate-attr=feature(try_blocks)",
        "-Zcrate-attr=feature(type_alias_impl_trait)",
        "-Zcrate-attr=feature(type_ascription)",
        "-Zcrate-attr=feature(type_changing_struct_update)",
        "-Zcrate-attr=feature(unix_sigpipe)",
        "-Zcrate-attr=feature(unsized_fn_params)",
        "-Zcrate-attr=feature(unsized_locals)",
        "-Zcrate-attr=feature(unsized_tuple_coercion)",
        "-Zcrate-attr=feature(used_with_arg)",
        //"-Zcrate-attr=feature(wasm_abi)",
        "-Zcrate-attr=feature(yeet_expr)",  */
    ],
    &[
        "-Zunstable-options",
        "--edition=2021",
        "-Zvalidate-mir",
        "-Cdebug-assertions",
        /*
        "-Zcrate-attr=feature(abi_unadjusted)",
        "-Zcrate-attr=feature(abi_vectorcall)",
        "-Zcrate-attr=feature(anonymous_lifetime_in_impl_trait)",
        "-Zcrate-attr=feature(generic_assert)",
        "-Zcrate-attr=feature(lang_items)",
        "-Zcrate-attr=feature(omit_gdb_pretty_printer_section)",
        "-Zcrate-attr=feature(prelude_import)",
        "-Zcrate-attr=feature(profiler_runtime)",
        "-Zcrate-attr=feature(rustc_attrs)",
        //        "-Zcrate-attr=feature(staged_api)",
        "-Zcrate-attr=feature(test_2018_feature)",
        "-Zcrate-attr=feature(test_unstable_lint)",
        "-Zcrate-attr=feature(unsafe_pin_internals)",
        "-Zcrate-attr=feature(with_negative_coherence)",
        "-Zcrate-attr=feature(auto_traits)",
        "-Zcrate-attr=feature(box_patterns)",
        "-Zcrate-attr=feature(doc_notable_trait)",
        "-Zcrate-attr=feature(dropck_eyepatch)",
        "-Zcrate-attr=feature(fundamental)",
        "-Zcrate-attr=feature(link_llvm_intrinsics)",
        "-Zcrate-attr=feature(linkage)",
        "-Zcrate-attr=feature(needs_panic_runtime)",
        "-Zcrate-attr=feature(panic_runtime)",
        "-Zcrate-attr=feature(rustc_allow_const_fn_unstable)",
        "-Zcrate-attr=feature(rustc_private)",
        "-Zcrate-attr=feature(rustdoc_internals)",
        "-Zcrate-attr=feature(rustdoc_missing_doc_code_examples)",
        "-Zcrate-attr=feature(start)",
        "-Zcrate-attr=feature(structural_match)",
        "-Zcrate-attr=feature(unboxed_closures)",
        /*  "-Zcrate-attr=feature(aarch64_ver_target_feature)",
        "-Zcrate-attr=feature(arm_target_feature)",
        "-Zcrate-attr=feature(avx512_target_feature)",
        "-Zcrate-attr=feature(bpf_target_feature)",
        "-Zcrate-attr=feature(cmpxchg16b_target_feature)",
        "-Zcrate-attr=feature(ermsb_target_feature)",
        "-Zcrate-attr=feature(f16c_target_feature)",
        "-Zcrate-attr=feature(hexagon_target_feature)",
        "-Zcrate-attr=feature(mips_target_feature)",
        "-Zcrate-attr=feature(movbe_target_feature)",
        "-Zcrate-attr=feature(powerpc_target_feature)",
        "-Zcrate-attr=feature(riscv_target_feature)",
        "-Zcrate-attr=feature(rtm_target_feature)",
        "-Zcrate-attr=feature(sse4a_target_feature)",
        "-Zcrate-attr=feature(tbm_target_feature)",
        "-Zcrate-attr=feature(wasm_target_feature)",  */
        "-Zcrate-attr=feature(abi_avr_interrupt)",
        "-Zcrate-attr=feature(abi_c_cmse_nonsecure_call)",
        "-Zcrate-attr=feature(abi_efiapi)",
        "-Zcrate-attr=feature(abi_msp430_interrupt)",
        "-Zcrate-attr=feature(abi_ptx)",
        "-Zcrate-attr=feature(abi_x86_interrupt)",
        "-Zcrate-attr=feature(adt_const_params)",
        "-Zcrate-attr=feature(alloc_error_handler)",
        "-Zcrate-attr=feature(arbitrary_enum_discriminant)",
        "-Zcrate-attr=feature(arbitrary_self_types)",
        "-Zcrate-attr=feature(asm_const)",
        "-Zcrate-attr=feature(asm_experimental_arch)",
        "-Zcrate-attr=feature(asm_sym)",
        "-Zcrate-attr=feature(asm_unwind)",
        "-Zcrate-attr=feature(associated_const_equality)",
        "-Zcrate-attr=feature(associated_type_bounds)",
        "-Zcrate-attr=feature(associated_type_defaults)",
        "-Zcrate-attr=feature(async_closure)",
        "-Zcrate-attr=feature(c_unwind)",
        "-Zcrate-attr=feature(c_variadic)",
        "-Zcrate-attr=feature(cfg_sanitize)",
        "-Zcrate-attr=feature(cfg_target_compact)",
        "-Zcrate-attr=feature(cfg_target_has_atomic)",
        "-Zcrate-attr=feature(cfg_target_has_atomic_equal_alignment)",
        "-Zcrate-attr=feature(cfg_target_thread_local)",
        "-Zcrate-attr=feature(cfg_version)",
        "-Zcrate-attr=feature(closure_lifetime_binder)",
        "-Zcrate-attr=feature(closure_track_caller)",
        "-Zcrate-attr=feature(cmse_nonsecure_entry)",
        "-Zcrate-attr=feature(collapse_debuginfo)",
        "-Zcrate-attr=feature(const_async_blocks)",
        "-Zcrate-attr=feature(const_extern_fn)",
        "-Zcrate-attr=feature(const_fn_floating_point_arithmetic)",
        "-Zcrate-attr=feature(const_for)",
        "-Zcrate-attr=feature(const_mut_refs)",
        "-Zcrate-attr=feature(const_precise_live_drops)",
        "-Zcrate-attr=feature(const_refs_to_cell)",
        "-Zcrate-attr=feature(const_trait_impl)",
        "-Zcrate-attr=feature(const_try)",
        "-Zcrate-attr=feature(custom_inner_attributes)",
        "-Zcrate-attr=feature(custom_test_frameworks)",
        "-Zcrate-attr=feature(debugger_visualizer)",
        "-Zcrate-attr=feature(decl_macro)",
        "-Zcrate-attr=feature(default_alloc_error_handler)",
        "-Zcrate-attr=feature(default_type_parameter_fallback)",
        "-Zcrate-attr=feature(deprecated_safe)",
        "-Zcrate-attr=feature(deprecated_suggestion)",
        "-Zcrate-attr=feature(doc_auto_cfg)",
        "-Zcrate-attr=feature(doc_cfg)",
        "-Zcrate-attr=feature(doc_cfg_hide)",
        "-Zcrate-attr=feature(doc_masked)",
        "-Zcrate-attr=feature(dyn_star)",
        "-Zcrate-attr=feature(exclusive_range_pattern)",
        "-Zcrate-attr=feature(exhaustive_patterns)",
        "-Zcrate-attr=feature(extern_types)",
        "-Zcrate-attr=feature(ffi_const)",
        "-Zcrate-attr=feature(ffi_pure)",
        "-Zcrate-attr=feature(fn_align)",
        "-Zcrate-attr=feature(coroutine_clone)",
        "-Zcrate-attr=feature(coroutines)",
        "-Zcrate-attr=feature(generic_arg_infer)",
        "-Zcrate-attr=feature(generic_associated_types_extended)",
        "-Zcrate-attr=feature(generic_const_exprs)",
        "-Zcrate-attr=feature(half_open_range_patterns)",
        "-Zcrate-attr=feature(if_let_guard)",
        "-Zcrate-attr=feature(imported_main)",
        "-Zcrate-attr=feature(inherent_associated_types)",
        "-Zcrate-attr=feature(inline_const)",
        "-Zcrate-attr=feature(inline_const_pat)",
        "-Zcrate-attr=feature(intra_doc_pointers)",
        "-Zcrate-attr=feature(large_assignments)",
        "-Zcrate-attr=feature(let_chains)",
        "-Zcrate-attr=feature(link_cfg)",
        "-Zcrate-attr=feature(lint_reasons)",
        "-Zcrate-attr=feature(macro_metavar_expr)",
        "-Zcrate-attr=feature(marker_trait_attr)",
        "-Zcrate-attr=feature(min_specialization)",
        "-Zcrate-attr=feature(more_qualified_paths)",
        "-Zcrate-attr=feature(must_not_suspend)",
        "-Zcrate-attr=feature(naked_functions)",
        "-Zcrate-attr=feature(native_link_modifiers_as_needed)",
        "-Zcrate-attr=feature(native_link_modifiers_verbatim)",
        "-Zcrate-attr=feature(negative_impls)",
        "-Zcrate-attr=feature(never_type)",
        "-Zcrate-attr=feature(never_type_fallback)",
        "-Zcrate-attr=feature(no_core)",
        "-Zcrate-attr=feature(no_coverage)",
        "-Zcrate-attr=feature(no_sanitize)",
        "-Zcrate-attr=feature(non_exhaustive_omitted_patterns_lint)",
        "-Zcrate-attr=feature(object_safe_for_dispatch)",
        "-Zcrate-attr=feature(optimize_attribute)",
        "-Zcrate-attr=feature(plugin)",
        "-Zcrate-attr=feature(precise_pointer_size_matching)",
        "-Zcrate-attr=feature(proc_macro_hygiene)",
        "-Zcrate-attr=feature(raw_dylib)",
        "-Zcrate-attr=feature(raw_ref_op)",
        "-Zcrate-attr=feature(register_tool)",
        "-Zcrate-attr=feature(repr128)",
        "-Zcrate-attr=feature(repr_simd)",
        "-Zcrate-attr=feature(rust_cold_cc)",
        "-Zcrate-attr=feature(simd_ffi)",
        "-Zcrate-attr=feature(specialization)",
        "-Zcrate-attr=feature(stmt_expr_attributes)",
        "-Zcrate-attr=feature(strict_provenance)",
        "-Zcrate-attr=feature(target_feature_11)",
        "-Zcrate-attr=feature(thread_local)",
        "-Zcrate-attr=feature(trait_alias)",
        "-Zcrate-attr=feature(transparent_unions)",
        "-Zcrate-attr=feature(trivial_bounds)",
        "-Zcrate-attr=feature(try_blocks)",
        "-Zcrate-attr=feature(type_alias_impl_trait)",
        "-Zcrate-attr=feature(type_ascription)",
        "-Zcrate-attr=feature(type_changing_struct_update)",
        "-Zcrate-attr=feature(unix_sigpipe)",
        "-Zcrate-attr=feature(unsized_fn_params)",
        "-Zcrate-attr=feature(unsized_locals)",
        "-Zcrate-attr=feature(unsized_tuple_coercion)",
        "-Zcrate-attr=feature(used_with_arg)",
        //"-Zcrate-attr=feature(wasm_abi)",
        "-Zcrate-attr=feature(yeet_expr)",  */
    ],
];

pub(crate) static CLIPPYLINTS: &[&str] = &[
    "-Wclippy::complexity",
    "-Wclippy::correctness",
    "-Wclippy::nursery",
    "-Wclippy::pedantic",
    "-Wclippy::style",
    "-Wclippy::suspicious",
    "-Aclippy::cargo",
    //.arg("-Wclippy::internal")
];

/*
for i in `rustc -Whelp | grep "^.*allow  "  -o | awk '{print $1}'` ; do ; echo "\"-W${i}\"," ; done
*/
pub(crate) static RUSTC_ALLOW_BY_DEFAULT_LINTS: &[&str] = &[
    "-Wabsolute-paths-not-starting-with-crate",
    "-Wbox-pointers",
    "-Wdeprecated-in-future",
    "-Welided-lifetimes-in-paths",
    "-Wexplicit-outlives-requirements",
    "-Wffi-unwind-calls",
    "-Wfuzzy-provenance-casts",
    "-Wkeyword-idents",
    "-Wlet-underscore-drop",
    "-Wlossy-provenance-casts",
    "-Wmacro-use-extern-crate",
    "-Wmeta-variable-misuse",
    "-Wmissing-abi",
    "-Wmissing-copy-implementations",
    "-Wmissing-debug-implementations",
    "-Wmissing-docs",
    "-Wmultiple-supertrait-upcastable",
    "-Wmust-not-suspend",
    "-Wnon-ascii-idents",
    "-Wnon-exhaustive-omitted-patterns",
    "-Wrust-2021-incompatible-closure-captures",
    "-Wrust-2021-incompatible-or-patterns",
    "-Wrust-2021-prefixes-incompatible-syntax",
    "-Wrust-2021-prelude-collisions",
    "-Wsingle-use-lifetimes",
    "-Wtrivial-casts",
    "-Wtrivial-numeric-casts",
    "-Wunit-bindings",
    "-Wunnameable-types",
    "-Wunreachable-pub",
    "-Wunsafe-code",
    "-Wunsafe-op-in-unsafe-fn",
    "-Wunstable-features",
    "-Wunused-crate-dependencies",
    "-Wunused-extern-crates",
    "-Wunused-import-braces",
    "-Wunused-lifetimes",
    "-Wunused-macro-rules",
    "-Wunused-qualifications",
    "-Wunused-results",
    "-Wvariant-size-differences",
];
#[cfg(test)]
mod tests {
    use super::{
        DEFAULT_RUSTFLAGS, EXCEPTIONS, EXPENSIVE_RUSTFLAGS, MIRIFLAGS, MIRI_EXCEPTIONS,
        MIRI_RUSTFLAGS,
    };
    use crate::{ice::*, RUSTC_ALLOW_BY_DEFAULT_LINTS};
    use std::fs::File;
    use std::io::Write;
    use tempdir::TempDir;

    const DUMMY_FILE_CONTENT: &str = "pub fn main() {}\n";

    fn sleep_half_a_second() {
        use std::{thread, time};

        let sleep_time = time::Duration::from_millis(500); // half a second

        thread::sleep(sleep_time);
    }

    #[test]
    #[allow(non_snake_case)]
    fn RUSTC_ALLOW_BY_DEFAULT_LINTS_are_valid() {
        // rustc testrunner might override LD_LIBRARY_PATH with a path for nightly toolchain,
        // which then makes the master toolchain look there and crash
        //
        // cargo might set that for doc tests or proc macros or whatever
        // another workaround is to always compile the crate with master toolchain instead of nightly
        std::env::remove_var("LD_LIBRARY_PATH");
        // make sure we don't have invalid rustc flags
        for (i, lint) in RUSTC_ALLOW_BY_DEFAULT_LINTS
            .iter()
            // skip incr comp here, needs to be special cased!
            .enumerate()
        {
            // check that a flag does not contain spaces :/
            assert!(!lint.contains(' '), "{}", lint);

            let tempdir = TempDir::new(&i.to_string()).expect("failed to create tempdir!");
            let tempdir_path = tempdir.path();
            let rustfile_path = tempdir_path.join("file.rs");
            let mut rustfile = File::create(&rustfile_path).unwrap();
            writeln!(rustfile, "{DUMMY_FILE_CONTENT}").unwrap();
            assert!(rustfile_path.is_file());
            assert!(std::path::PathBuf::from(Executable::Rustc.path()).is_file());
            let mut cmd = std::process::Command::new(Executable::Rustc.path());
            cmd.arg(*lint)
                .arg("dummy.rs")
                .arg("-Dstable_features")
                .arg("-Dinternal_features");

            let output = cmd.output();
            let output = output.as_ref().unwrap();
            let stderr = String::from_utf8(output.stderr.clone()).unwrap();
            let stdout = String::from_utf8(output.stdout.clone()).unwrap();

            if stdout.contains("renamed") || stderr.contains("renamed") {
                eprintln!("!!!!!  PROBLEM WITH '{lint}' !!!!");

                eprintln!("{stdout}");
                eprintln!("{stderr}");

                panic!("aborting due to bad lint");
            }

            let status = output.status;
            if !status.success() {
                dbg!(&cmd);
                dbg!(&output);
                panic!("bad exit status!")
            }

            assert!(output.status.success());
            sleep_half_a_second()
        }
    }

    #[test]
    fn default_rustc_flags_are_valid() {
        // rustc testrunner might override LD_LIBRARY_PATH with a path for nightly toolchain,
        // which then makes the master toolchain look there and crash
        //
        // cargo might set that for doc tests or proc macros or whatever
        // another workaround is to always compile the crate with master toolchain instead of nightly
        std::env::remove_var("LD_LIBRARY_PATH");
        // make sure we don't have invalid rustc flags
        for (i, batch_of_flags) in DEFAULT_RUSTFLAGS
            .iter()
            // skip incr comp here, needs to be special cased!
            .filter(|flags| flags != &&["INCR_COMP"])
            .enumerate()
        {
            // check that a flag does not contain spaces :/
            batch_of_flags
                .iter()
                .for_each(|flag| assert!(!flag.contains(' '), "{}", flag));

            let tempdir = TempDir::new(&i.to_string()).expect("failed to create tempdir!");
            let tempdir_path = tempdir.path();
            let rustfile_path = tempdir_path.join("file.rs");
            let mut rustfile = File::create(&rustfile_path).unwrap();
            writeln!(rustfile, "{DUMMY_FILE_CONTENT}").unwrap();
            assert!(rustfile_path.is_file());
            assert!(std::path::PathBuf::from(Executable::Rustc.path()).is_file());
            let mut cmd = std::process::Command::new(Executable::Rustc.path());
            cmd.args(*batch_of_flags)
                .arg("dummy.rs")
                .arg("-Dstable_features")
                .arg("-Dinternal_features");

            let output = cmd.output();
            let status = output.as_ref().unwrap().status;
            if !status.success() {
                dbg!(&cmd);
                dbg!(&output);
                panic!("bad exit status!")
            }
            assert!(output.as_ref().unwrap().status.success());
            sleep_half_a_second()
        }
    }

    #[test]
    fn miri_rustc_flags_are_valid() {
        // rustc testrunner might override LD_LIBRARY_PATH with a path for nightly toolchain,
        // which then makes the master toolchain look there and crash
        //
        // cargo might set that for doc tests or proc macros or whatever
        // another workaround is to always compile the crate with master toolchain instead of nightly
        std::env::remove_var("LD_LIBRARY_PATH");
        // make sure we don't have invalid rustc flags
        for (i, batch_of_flags) in MIRI_RUSTFLAGS
            .iter()
            // skip incr comp here, needs to be special cased!
            .filter(|flags| flags != &&["INCR_COMP"])
            .enumerate()
        {
            // check that a flag does not contain spaces :/
            batch_of_flags
                .iter()
                .for_each(|flag| assert!(!flag.contains(' '), "{}", flag));

            let tempdir = TempDir::new(&i.to_string()).expect("failed to create tempdir!");
            let tempdir_path = tempdir.path();
            let rustfile_path = tempdir_path.join("file.rs");
            let mut rustfile = File::create(&rustfile_path).unwrap();
            writeln!(rustfile, "{DUMMY_FILE_CONTENT}").unwrap();
            assert!(rustfile_path.is_file());
            assert!(std::path::PathBuf::from(Executable::Rustc.path()).is_file());
            let mut cmd = std::process::Command::new(Executable::Rustc.path());
            cmd.args(*batch_of_flags)
                .arg("dummy.rs")
                .arg("-Dstable_features")
                .arg("-Dinternal_features");

            let output = cmd.output();
            let status = output.as_ref().unwrap().status;
            if !status.success() {
                dbg!(&cmd);
                dbg!(&output);
                panic!("bad exit status!")
            }
            assert!(output.as_ref().unwrap().status.success());
            sleep_half_a_second()
        }
    }
    #[test]
    fn expensive_rustc_flags_are_valid() {
        // rustc testrunner might override LD_LIBRARY_PATH with a path for nightly toolchain,
        // which then makes the master toolchain look there and crash
        //
        // cargo might set that for doc tests or proc macros or whatever
        // another workaround is to always compile the crate with master toolchain instead of nightly
        std::env::remove_var("LD_LIBRARY_PATH");
        // make sure we don't have invalid rustc flags
        for (i, batch_of_flags) in EXPENSIVE_RUSTFLAGS
            .iter()
            // skip incr comp here, needs to be special cased!
            .filter(|flags| flags != &&["INCR_COMP"])
            .enumerate()
        {
            // check that a flag does not contain spaces :/
            batch_of_flags
                .iter()
                .for_each(|flag| assert!(!flag.contains(' '), "{}", flag));

            let tempdir = TempDir::new(&i.to_string()).expect("failed to create tempdir!");
            let tempdir_path = tempdir.path();
            let rustfile_path = tempdir_path.join("file.rs");
            let mut rustfile = File::create(&rustfile_path).unwrap();
            writeln!(rustfile, "{DUMMY_FILE_CONTENT}").unwrap();
            assert!(rustfile_path.is_file());
            assert!(std::path::PathBuf::from(Executable::Rustc.path()).is_file());
            let mut cmd = std::process::Command::new(Executable::Rustc.path());
            cmd.args(*batch_of_flags)
                .arg("dummy.rs")
                .arg("-Dstable_features")
                .arg("-Dinternal_features");

            let output = cmd.output();
            let status = output.as_ref().unwrap().status;
            if !status.success() {
                dbg!(&cmd);
                dbg!(&output);
                panic!("bad exit status!")
            }
            assert!(output.as_ref().unwrap().status.success());
            sleep_half_a_second()
        }
    }

    #[test]
    fn filepaths_are_valid() {
        let paths_iter = EXCEPTIONS.iter().chain(MIRI_EXCEPTIONS.iter());

        paths_iter.for_each(|file| {
            assert!(!file.starts_with("./"), "{}", file);
            assert!(file.ends_with(".rs"), "{}", file);
        });
    }

    #[test]
    fn test_miriflags_are_valid() {
        for (i, batch_of_flags) in MIRIFLAGS.iter().enumerate() {
            let tempdir = TempDir::new(&format!("icemaker_miri_tempdir_{i}")).unwrap();
            let tempdir_path = tempdir.path();
            // create a new cargo project inside the tmpdir

            // dummy crate name
            let crate_name = &format!("_{i}");

            let mut cmd = std::process::Command::new("cargo");
            cmd.arg("new")
                .args(["--vcs", "none"])
                .arg(crate_name)
                .current_dir(tempdir_path);

            let status = cmd
                .output()
                .expect("failed to exec cargo new")
                .status
                .success();

            dbg!(&cmd);

            assert!(status, "failed to run cargo new");

            let source_path = {
                let mut sp = tempdir_path.to_owned();
                sp.push(crate_name);
                sp.push("src/");
                sp.push("main.rs");
                sp
            };

            // write the content of the file we want to check into tmpcrate/src/main.rs
            std::fs::write(source_path, DUMMY_FILE_CONTENT).expect("failed to write to file");

            // we should have everything prepared for the miri invocation now: execute "cargo miri run"

            let mut crate_path = tempdir_path.to_owned();
            crate_path.push(crate_name);

            let mut cmd = std::process::Command::new("cargo");

            let output = cmd
                .arg("+master")
                .arg("miri")
                .arg("run")
                .current_dir(crate_path)
                .env("MIRIFLAGS", batch_of_flags.join(" "))
                .env("RUSTFLAGS", "-Zvalidate-mir")
                .output()
                .unwrap();

            assert!(
                output.status.success(),
                "miri flags bad: '{batch_of_flags:?}'\n\noutput. {output:?}"
            );
            sleep_half_a_second()
        }
    }
}
